(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();var ye=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Tn(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Bn(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function o(){return this instanceof o?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(o){var s=Object.getOwnPropertyDescriptor(n,o);Object.defineProperty(t,o,s.get?s:{enumerable:!0,get:function(){return n[o]}})}),t}var Ot={exports:{}},wt,nr;function An(){if(nr)return wt;nr=1;var n=1e3,e=n*60,t=e*60,o=t*24,s=o*7,a=o*365.25;wt=function(m,_){_=_||{};var B=typeof m;if(B==="string"&&m.length>0)return u(m);if(B==="number"&&isFinite(m))return _.long?d(m):c(m);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(m))};function u(m){if(m=String(m),!(m.length>100)){var _=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(m);if(_){var B=parseFloat(_[1]),M=(_[2]||"ms").toLowerCase();switch(M){case"years":case"year":case"yrs":case"yr":case"y":return B*a;case"weeks":case"week":case"w":return B*s;case"days":case"day":case"d":return B*o;case"hours":case"hour":case"hrs":case"hr":case"h":return B*t;case"minutes":case"minute":case"mins":case"min":case"m":return B*e;case"seconds":case"second":case"secs":case"sec":case"s":return B*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return B;default:return}}}}function c(m){var _=Math.abs(m);return _>=o?Math.round(m/o)+"d":_>=t?Math.round(m/t)+"h":_>=e?Math.round(m/e)+"m":_>=n?Math.round(m/n)+"s":m+"ms"}function d(m){var _=Math.abs(m);return _>=o?w(m,_,o,"day"):_>=t?w(m,_,t,"hour"):_>=e?w(m,_,e,"minute"):_>=n?w(m,_,n,"second"):m+" ms"}function w(m,_,B,M){var A=_>=B*1.5;return Math.round(m/B)+" "+M+(A?"s":"")}return wt}function In(n){t.debug=t,t.default=t,t.coerce=d,t.disable=u,t.enable=s,t.enabled=c,t.humanize=An(),t.destroy=w,Object.keys(n).forEach(m=>{t[m]=n[m]}),t.names=[],t.skips=[],t.formatters={};function e(m){let _=0;for(let B=0;B<m.length;B++)_=(_<<5)-_+m.charCodeAt(B),_|=0;return t.colors[Math.abs(_)%t.colors.length]}t.selectColor=e;function t(m){let _,B=null,M,A;function I(...N){if(!I.enabled)return;const p=I,S=Number(new Date),R=S-(_||S);p.diff=R,p.prev=_,p.curr=S,_=S,N[0]=t.coerce(N[0]),typeof N[0]!="string"&&N.unshift("%O");let v=0;N[0]=N[0].replace(/%([a-zA-Z%])/g,(L,j)=>{if(L==="%%")return"%";v++;const k=t.formatters[j];if(typeof k=="function"){const O=N[v];L=k.call(p,O),N.splice(v,1),v--}return L}),t.formatArgs.call(p,N),(p.log||t.log).apply(p,N)}return I.namespace=m,I.useColors=t.useColors(),I.color=t.selectColor(m),I.extend=o,I.destroy=t.destroy,Object.defineProperty(I,"enabled",{enumerable:!0,configurable:!1,get:()=>B!==null?B:(M!==t.namespaces&&(M=t.namespaces,A=t.enabled(m)),A),set:N=>{B=N}}),typeof t.init=="function"&&t.init(I),I}function o(m,_){const B=t(this.namespace+(typeof _>"u"?":":_)+m);return B.log=this.log,B}function s(m){t.save(m),t.namespaces=m,t.names=[],t.skips=[];const _=(typeof m=="string"?m:"").trim().replace(" ",",").split(",").filter(Boolean);for(const B of _)B[0]==="-"?t.skips.push(B.slice(1)):t.names.push(B)}function a(m,_){let B=0,M=0,A=-1,I=0;for(;B<m.length;)if(M<_.length&&(_[M]===m[B]||_[M]==="*"))_[M]==="*"?(A=M,I=B,M++):(B++,M++);else if(A!==-1)M=A+1,I++,B=I;else return!1;for(;M<_.length&&_[M]==="*";)M++;return M===_.length}function u(){const m=[...t.names,...t.skips.map(_=>"-"+_)].join(",");return t.enable(""),m}function c(m){for(const _ of t.skips)if(a(m,_))return!1;for(const _ of t.names)if(a(m,_))return!0;return!1}function d(m){return m instanceof Error?m.stack||m.message:m}function w(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}var Mn=In;(function(n,e){e.formatArgs=o,e.save=s,e.load=a,e.useColors=t,e.storage=u(),e.destroy=(()=>{let d=!1;return()=>{d||(d=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function t(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let d;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(d=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(d[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function o(d){if(d[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+d[0]+(this.useColors?"%c ":" ")+"+"+n.exports.humanize(this.diff),!this.useColors)return;const w="color: "+this.color;d.splice(1,0,w,"color: inherit");let m=0,_=0;d[0].replace(/%[a-zA-Z%]/g,B=>{B!=="%%"&&(m++,B==="%c"&&(_=m))}),d.splice(_,0,w)}e.log=console.debug||console.log||(()=>{});function s(d){try{d?e.storage.setItem("debug",d):e.storage.removeItem("debug")}catch{}}function a(){let d;try{d=e.storage.getItem("debug")}catch{}return!d&&typeof process<"u"&&"env"in process&&(d={}.DEBUG),d}function u(){try{return localStorage}catch{}}n.exports=Mn(e);const{formatters:c}=n.exports;c.j=function(d){try{return JSON.stringify(d)}catch(w){return"[UnexpectedJSONParseError]: "+w.message}}})(Ot,Ot.exports);var xn=Ot.exports,Nn=function(){if(typeof globalThis>"u")return null;var e={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return e.RTCPeerConnection?e:null},kt={exports:{}},Ut={exports:{}},qe={},lt={};lt.byteLength=Ln;lt.toByteArray=On;lt.fromByteArray=jn;var de=[],ce=[],Pn=typeof Uint8Array<"u"?Uint8Array:Array,_t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Le=0,Fn=_t.length;Le<Fn;++Le)de[Le]=_t[Le],ce[_t.charCodeAt(Le)]=Le;ce["-".charCodeAt(0)]=62;ce["_".charCodeAt(0)]=63;function xr(n){var e=n.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=n.indexOf("=");t===-1&&(t=e);var o=t===e?0:4-t%4;return[t,o]}function Ln(n){var e=xr(n),t=e[0],o=e[1];return(t+o)*3/4-o}function Dn(n,e,t){return(e+t)*3/4-t}function On(n){var e,t=xr(n),o=t[0],s=t[1],a=new Pn(Dn(n,o,s)),u=0,c=s>0?o-4:o,d;for(d=0;d<c;d+=4)e=ce[n.charCodeAt(d)]<<18|ce[n.charCodeAt(d+1)]<<12|ce[n.charCodeAt(d+2)]<<6|ce[n.charCodeAt(d+3)],a[u++]=e>>16&255,a[u++]=e>>8&255,a[u++]=e&255;return s===2&&(e=ce[n.charCodeAt(d)]<<2|ce[n.charCodeAt(d+1)]>>4,a[u++]=e&255),s===1&&(e=ce[n.charCodeAt(d)]<<10|ce[n.charCodeAt(d+1)]<<4|ce[n.charCodeAt(d+2)]>>2,a[u++]=e>>8&255,a[u++]=e&255),a}function kn(n){return de[n>>18&63]+de[n>>12&63]+de[n>>6&63]+de[n&63]}function Un(n,e,t){for(var o,s=[],a=e;a<t;a+=3)o=(n[a]<<16&16711680)+(n[a+1]<<8&65280)+(n[a+2]&255),s.push(kn(o));return s.join("")}function jn(n){for(var e,t=n.length,o=t%3,s=[],a=16383,u=0,c=t-o;u<c;u+=a)s.push(Un(n,u,u+a>c?c:u+a));return o===1?(e=n[t-1],s.push(de[e>>2]+de[e<<4&63]+"==")):o===2&&(e=(n[t-2]<<8)+n[t-1],s.push(de[e>>10]+de[e>>4&63]+de[e<<2&63]+"=")),s.join("")}var Kt={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Kt.read=function(n,e,t,o,s){var a,u,c=s*8-o-1,d=(1<<c)-1,w=d>>1,m=-7,_=t?s-1:0,B=t?-1:1,M=n[e+_];for(_+=B,a=M&(1<<-m)-1,M>>=-m,m+=c;m>0;a=a*256+n[e+_],_+=B,m-=8);for(u=a&(1<<-m)-1,a>>=-m,m+=o;m>0;u=u*256+n[e+_],_+=B,m-=8);if(a===0)a=1-w;else{if(a===d)return u?NaN:(M?-1:1)*(1/0);u=u+Math.pow(2,o),a=a-w}return(M?-1:1)*u*Math.pow(2,a-o)};Kt.write=function(n,e,t,o,s,a){var u,c,d,w=a*8-s-1,m=(1<<w)-1,_=m>>1,B=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,M=o?0:a-1,A=o?1:-1,I=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(c=isNaN(e)?1:0,u=m):(u=Math.floor(Math.log(e)/Math.LN2),e*(d=Math.pow(2,-u))<1&&(u--,d*=2),u+_>=1?e+=B/d:e+=B*Math.pow(2,1-_),e*d>=2&&(u++,d/=2),u+_>=m?(c=0,u=m):u+_>=1?(c=(e*d-1)*Math.pow(2,s),u=u+_):(c=e*Math.pow(2,_-1)*Math.pow(2,s),u=0));s>=8;n[t+M]=c&255,M+=A,c/=256,s-=8);for(u=u<<s|c,w+=s;w>0;n[t+M]=u&255,M+=A,u/=256,w-=8);n[t+M-A]|=I*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(n){const e=lt,t=Kt,o=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=c,n.SlowBuffer=S,n.INSPECT_MAX_BYTES=50;const s=2147483647;n.kMaxLength=s,c.TYPED_ARRAY_SUPPORT=a(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a(){try{const l=new Uint8Array(1),r={foo:function(){return 42}};return Object.setPrototypeOf(r,Uint8Array.prototype),Object.setPrototypeOf(l,r),l.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function u(l){if(l>s)throw new RangeError('The value "'+l+'" is invalid for option "size"');const r=new Uint8Array(l);return Object.setPrototypeOf(r,c.prototype),r}function c(l,r,i){if(typeof l=="number"){if(typeof r=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return _(l)}return d(l,r,i)}c.poolSize=8192;function d(l,r,i){if(typeof l=="string")return B(l,r);if(ArrayBuffer.isView(l))return A(l);if(l==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof l);if(oe(l,ArrayBuffer)||l&&oe(l.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(oe(l,SharedArrayBuffer)||l&&oe(l.buffer,SharedArrayBuffer)))return I(l,r,i);if(typeof l=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const f=l.valueOf&&l.valueOf();if(f!=null&&f!==l)return c.from(f,r,i);const y=N(l);if(y)return y;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof l[Symbol.toPrimitive]=="function")return c.from(l[Symbol.toPrimitive]("string"),r,i);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof l)}c.from=function(l,r,i){return d(l,r,i)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array);function w(l){if(typeof l!="number")throw new TypeError('"size" argument must be of type number');if(l<0)throw new RangeError('The value "'+l+'" is invalid for option "size"')}function m(l,r,i){return w(l),l<=0?u(l):r!==void 0?typeof i=="string"?u(l).fill(r,i):u(l).fill(r):u(l)}c.alloc=function(l,r,i){return m(l,r,i)};function _(l){return w(l),u(l<0?0:p(l)|0)}c.allocUnsafe=function(l){return _(l)},c.allocUnsafeSlow=function(l){return _(l)};function B(l,r){if((typeof r!="string"||r==="")&&(r="utf8"),!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r);const i=R(l,r)|0;let f=u(i);const y=f.write(l,r);return y!==i&&(f=f.slice(0,y)),f}function M(l){const r=l.length<0?0:p(l.length)|0,i=u(r);for(let f=0;f<r;f+=1)i[f]=l[f]&255;return i}function A(l){if(oe(l,Uint8Array)){const r=new Uint8Array(l);return I(r.buffer,r.byteOffset,r.byteLength)}return M(l)}function I(l,r,i){if(r<0||l.byteLength<r)throw new RangeError('"offset" is outside of buffer bounds');if(l.byteLength<r+(i||0))throw new RangeError('"length" is outside of buffer bounds');let f;return r===void 0&&i===void 0?f=new Uint8Array(l):i===void 0?f=new Uint8Array(l,r):f=new Uint8Array(l,r,i),Object.setPrototypeOf(f,c.prototype),f}function N(l){if(c.isBuffer(l)){const r=p(l.length)|0,i=u(r);return i.length===0||l.copy(i,0,0,r),i}if(l.length!==void 0)return typeof l.length!="number"||Se(l.length)?u(0):M(l);if(l.type==="Buffer"&&Array.isArray(l.data))return M(l.data)}function p(l){if(l>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return l|0}function S(l){return+l!=l&&(l=0),c.alloc(+l)}c.isBuffer=function(r){return r!=null&&r._isBuffer===!0&&r!==c.prototype},c.compare=function(r,i){if(oe(r,Uint8Array)&&(r=c.from(r,r.offset,r.byteLength)),oe(i,Uint8Array)&&(i=c.from(i,i.offset,i.byteLength)),!c.isBuffer(r)||!c.isBuffer(i))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(r===i)return 0;let f=r.length,y=i.length;for(let b=0,T=Math.min(f,y);b<T;++b)if(r[b]!==i[b]){f=r[b],y=i[b];break}return f<y?-1:y<f?1:0},c.isEncoding=function(r){switch(String(r).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(r,i){if(!Array.isArray(r))throw new TypeError('"list" argument must be an Array of Buffers');if(r.length===0)return c.alloc(0);let f;if(i===void 0)for(i=0,f=0;f<r.length;++f)i+=r[f].length;const y=c.allocUnsafe(i);let b=0;for(f=0;f<r.length;++f){let T=r[f];if(oe(T,Uint8Array))b+T.length>y.length?(c.isBuffer(T)||(T=c.from(T)),T.copy(y,b)):Uint8Array.prototype.set.call(y,T,b);else if(c.isBuffer(T))T.copy(y,b);else throw new TypeError('"list" argument must be an Array of Buffers');b+=T.length}return y};function R(l,r){if(c.isBuffer(l))return l.length;if(ArrayBuffer.isView(l)||oe(l,ArrayBuffer))return l.byteLength;if(typeof l!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof l);const i=l.length,f=arguments.length>2&&arguments[2]===!0;if(!f&&i===0)return 0;let y=!1;for(;;)switch(r){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return G(l).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return i*2;case"hex":return i>>>1;case"base64":return We(l).length;default:if(y)return f?-1:G(l).length;r=(""+r).toLowerCase(),y=!0}}c.byteLength=R;function v(l,r,i){let f=!1;if((r===void 0||r<0)&&(r=0),r>this.length||((i===void 0||i>this.length)&&(i=this.length),i<=0)||(i>>>=0,r>>>=0,i<=r))return"";for(l||(l="utf8");;)switch(l){case"hex":return we(this,r,i);case"utf8":case"utf-8":return Ae(this,r,i);case"ascii":return pe(this,r,i);case"latin1":case"binary":return Ie(this,r,i);case"base64":return re(this,r,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Me(this,r,i);default:if(f)throw new TypeError("Unknown encoding: "+l);l=(l+"").toLowerCase(),f=!0}}c.prototype._isBuffer=!0;function P(l,r,i){const f=l[r];l[r]=l[i],l[i]=f}c.prototype.swap16=function(){const r=this.length;if(r%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let i=0;i<r;i+=2)P(this,i,i+1);return this},c.prototype.swap32=function(){const r=this.length;if(r%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let i=0;i<r;i+=4)P(this,i,i+3),P(this,i+1,i+2);return this},c.prototype.swap64=function(){const r=this.length;if(r%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let i=0;i<r;i+=8)P(this,i,i+7),P(this,i+1,i+6),P(this,i+2,i+5),P(this,i+3,i+4);return this},c.prototype.toString=function(){const r=this.length;return r===0?"":arguments.length===0?Ae(this,0,r):v.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(r){if(!c.isBuffer(r))throw new TypeError("Argument must be a Buffer");return this===r?!0:c.compare(this,r)===0},c.prototype.inspect=function(){let r="";const i=n.INSPECT_MAX_BYTES;return r=this.toString("hex",0,i).replace(/(.{2})/g,"$1 ").trim(),this.length>i&&(r+=" ... "),"<Buffer "+r+">"},o&&(c.prototype[o]=c.prototype.inspect),c.prototype.compare=function(r,i,f,y,b){if(oe(r,Uint8Array)&&(r=c.from(r,r.offset,r.byteLength)),!c.isBuffer(r))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof r);if(i===void 0&&(i=0),f===void 0&&(f=r?r.length:0),y===void 0&&(y=0),b===void 0&&(b=this.length),i<0||f>r.length||y<0||b>this.length)throw new RangeError("out of range index");if(y>=b&&i>=f)return 0;if(y>=b)return-1;if(i>=f)return 1;if(i>>>=0,f>>>=0,y>>>=0,b>>>=0,this===r)return 0;let T=b-y,W=f-i;const Z=Math.min(T,W),K=this.slice(y,b),Q=r.slice(i,f);for(let z=0;z<Z;++z)if(K[z]!==Q[z]){T=K[z],W=Q[z];break}return T<W?-1:W<T?1:0};function L(l,r,i,f,y){if(l.length===0)return-1;if(typeof i=="string"?(f=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,Se(i)&&(i=y?0:l.length-1),i<0&&(i=l.length+i),i>=l.length){if(y)return-1;i=l.length-1}else if(i<0)if(y)i=0;else return-1;if(typeof r=="string"&&(r=c.from(r,f)),c.isBuffer(r))return r.length===0?-1:j(l,r,i,f,y);if(typeof r=="number")return r=r&255,typeof Uint8Array.prototype.indexOf=="function"?y?Uint8Array.prototype.indexOf.call(l,r,i):Uint8Array.prototype.lastIndexOf.call(l,r,i):j(l,[r],i,f,y);throw new TypeError("val must be string, number or Buffer")}function j(l,r,i,f,y){let b=1,T=l.length,W=r.length;if(f!==void 0&&(f=String(f).toLowerCase(),f==="ucs2"||f==="ucs-2"||f==="utf16le"||f==="utf-16le")){if(l.length<2||r.length<2)return-1;b=2,T/=2,W/=2,i/=2}function Z(Q,z){return b===1?Q[z]:Q.readUInt16BE(z*b)}let K;if(y){let Q=-1;for(K=i;K<T;K++)if(Z(l,K)===Z(r,Q===-1?0:K-Q)){if(Q===-1&&(Q=K),K-Q+1===W)return Q*b}else Q!==-1&&(K-=K-Q),Q=-1}else for(i+W>T&&(i=T-W),K=i;K>=0;K--){let Q=!0;for(let z=0;z<W;z++)if(Z(l,K+z)!==Z(r,z)){Q=!1;break}if(Q)return K}return-1}c.prototype.includes=function(r,i,f){return this.indexOf(r,i,f)!==-1},c.prototype.indexOf=function(r,i,f){return L(this,r,i,f,!0)},c.prototype.lastIndexOf=function(r,i,f){return L(this,r,i,f,!1)};function k(l,r,i,f){i=Number(i)||0;const y=l.length-i;f?(f=Number(f),f>y&&(f=y)):f=y;const b=r.length;f>b/2&&(f=b/2);let T;for(T=0;T<f;++T){const W=parseInt(r.substr(T*2,2),16);if(Se(W))return T;l[i+T]=W}return T}function O(l,r,i,f){return Fe(G(r,l.length-i),l,i,f)}function X(l,r,i,f){return Fe(_e(r),l,i,f)}function ie(l,r,i,f){return Fe(We(r),l,i,f)}function ge(l,r,i,f){return Fe(Pe(r,l.length-i),l,i,f)}c.prototype.write=function(r,i,f,y){if(i===void 0)y="utf8",f=this.length,i=0;else if(f===void 0&&typeof i=="string")y=i,f=this.length,i=0;else if(isFinite(i))i=i>>>0,isFinite(f)?(f=f>>>0,y===void 0&&(y="utf8")):(y=f,f=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const b=this.length-i;if((f===void 0||f>b)&&(f=b),r.length>0&&(f<0||i<0)||i>this.length)throw new RangeError("Attempt to write outside buffer bounds");y||(y="utf8");let T=!1;for(;;)switch(y){case"hex":return k(this,r,i,f);case"utf8":case"utf-8":return O(this,r,i,f);case"ascii":case"latin1":case"binary":return X(this,r,i,f);case"base64":return ie(this,r,i,f);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ge(this,r,i,f);default:if(T)throw new TypeError("Unknown encoding: "+y);y=(""+y).toLowerCase(),T=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function re(l,r,i){return r===0&&i===l.length?e.fromByteArray(l):e.fromByteArray(l.slice(r,i))}function Ae(l,r,i){i=Math.min(l.length,i);const f=[];let y=r;for(;y<i;){const b=l[y];let T=null,W=b>239?4:b>223?3:b>191?2:1;if(y+W<=i){let Z,K,Q,z;switch(W){case 1:b<128&&(T=b);break;case 2:Z=l[y+1],(Z&192)===128&&(z=(b&31)<<6|Z&63,z>127&&(T=z));break;case 3:Z=l[y+1],K=l[y+2],(Z&192)===128&&(K&192)===128&&(z=(b&15)<<12|(Z&63)<<6|K&63,z>2047&&(z<55296||z>57343)&&(T=z));break;case 4:Z=l[y+1],K=l[y+2],Q=l[y+3],(Z&192)===128&&(K&192)===128&&(Q&192)===128&&(z=(b&15)<<18|(Z&63)<<12|(K&63)<<6|Q&63,z>65535&&z<1114112&&(T=z))}}T===null?(T=65533,W=1):T>65535&&(T-=65536,f.push(T>>>10&1023|55296),T=56320|T&1023),f.push(T),y+=W}return He(f)}const Ce=4096;function He(l){const r=l.length;if(r<=Ce)return String.fromCharCode.apply(String,l);let i="",f=0;for(;f<r;)i+=String.fromCharCode.apply(String,l.slice(f,f+=Ce));return i}function pe(l,r,i){let f="";i=Math.min(l.length,i);for(let y=r;y<i;++y)f+=String.fromCharCode(l[y]&127);return f}function Ie(l,r,i){let f="";i=Math.min(l.length,i);for(let y=r;y<i;++y)f+=String.fromCharCode(l[y]);return f}function we(l,r,i){const f=l.length;(!r||r<0)&&(r=0),(!i||i<0||i>f)&&(i=f);let y="";for(let b=r;b<i;++b)y+=$e[l[b]];return y}function Me(l,r,i){const f=l.slice(r,i);let y="";for(let b=0;b<f.length-1;b+=2)y+=String.fromCharCode(f[b]+f[b+1]*256);return y}c.prototype.slice=function(r,i){const f=this.length;r=~~r,i=i===void 0?f:~~i,r<0?(r+=f,r<0&&(r=0)):r>f&&(r=f),i<0?(i+=f,i<0&&(i=0)):i>f&&(i=f),i<r&&(i=r);const y=this.subarray(r,i);return Object.setPrototypeOf(y,c.prototype),y};function J(l,r,i){if(l%1!==0||l<0)throw new RangeError("offset is not uint");if(l+r>i)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(r,i,f){r=r>>>0,i=i>>>0,f||J(r,i,this.length);let y=this[r],b=1,T=0;for(;++T<i&&(b*=256);)y+=this[r+T]*b;return y},c.prototype.readUintBE=c.prototype.readUIntBE=function(r,i,f){r=r>>>0,i=i>>>0,f||J(r,i,this.length);let y=this[r+--i],b=1;for(;i>0&&(b*=256);)y+=this[r+--i]*b;return y},c.prototype.readUint8=c.prototype.readUInt8=function(r,i){return r=r>>>0,i||J(r,1,this.length),this[r]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(r,i){return r=r>>>0,i||J(r,2,this.length),this[r]|this[r+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(r,i){return r=r>>>0,i||J(r,2,this.length),this[r]<<8|this[r+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(r,i){return r=r>>>0,i||J(r,4,this.length),(this[r]|this[r+1]<<8|this[r+2]<<16)+this[r+3]*16777216},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(r,i){return r=r>>>0,i||J(r,4,this.length),this[r]*16777216+(this[r+1]<<16|this[r+2]<<8|this[r+3])},c.prototype.readBigUInt64LE=le(function(r){r=r>>>0,x(r,"offset");const i=this[r],f=this[r+7];(i===void 0||f===void 0)&&D(r,this.length-8);const y=i+this[++r]*2**8+this[++r]*2**16+this[++r]*2**24,b=this[++r]+this[++r]*2**8+this[++r]*2**16+f*2**24;return BigInt(y)+(BigInt(b)<<BigInt(32))}),c.prototype.readBigUInt64BE=le(function(r){r=r>>>0,x(r,"offset");const i=this[r],f=this[r+7];(i===void 0||f===void 0)&&D(r,this.length-8);const y=i*2**24+this[++r]*2**16+this[++r]*2**8+this[++r],b=this[++r]*2**24+this[++r]*2**16+this[++r]*2**8+f;return(BigInt(y)<<BigInt(32))+BigInt(b)}),c.prototype.readIntLE=function(r,i,f){r=r>>>0,i=i>>>0,f||J(r,i,this.length);let y=this[r],b=1,T=0;for(;++T<i&&(b*=256);)y+=this[r+T]*b;return b*=128,y>=b&&(y-=Math.pow(2,8*i)),y},c.prototype.readIntBE=function(r,i,f){r=r>>>0,i=i>>>0,f||J(r,i,this.length);let y=i,b=1,T=this[r+--y];for(;y>0&&(b*=256);)T+=this[r+--y]*b;return b*=128,T>=b&&(T-=Math.pow(2,8*i)),T},c.prototype.readInt8=function(r,i){return r=r>>>0,i||J(r,1,this.length),this[r]&128?(255-this[r]+1)*-1:this[r]},c.prototype.readInt16LE=function(r,i){r=r>>>0,i||J(r,2,this.length);const f=this[r]|this[r+1]<<8;return f&32768?f|4294901760:f},c.prototype.readInt16BE=function(r,i){r=r>>>0,i||J(r,2,this.length);const f=this[r+1]|this[r]<<8;return f&32768?f|4294901760:f},c.prototype.readInt32LE=function(r,i){return r=r>>>0,i||J(r,4,this.length),this[r]|this[r+1]<<8|this[r+2]<<16|this[r+3]<<24},c.prototype.readInt32BE=function(r,i){return r=r>>>0,i||J(r,4,this.length),this[r]<<24|this[r+1]<<16|this[r+2]<<8|this[r+3]},c.prototype.readBigInt64LE=le(function(r){r=r>>>0,x(r,"offset");const i=this[r],f=this[r+7];(i===void 0||f===void 0)&&D(r,this.length-8);const y=this[r+4]+this[r+5]*2**8+this[r+6]*2**16+(f<<24);return(BigInt(y)<<BigInt(32))+BigInt(i+this[++r]*2**8+this[++r]*2**16+this[++r]*2**24)}),c.prototype.readBigInt64BE=le(function(r){r=r>>>0,x(r,"offset");const i=this[r],f=this[r+7];(i===void 0||f===void 0)&&D(r,this.length-8);const y=(i<<24)+this[++r]*2**16+this[++r]*2**8+this[++r];return(BigInt(y)<<BigInt(32))+BigInt(this[++r]*2**24+this[++r]*2**16+this[++r]*2**8+f)}),c.prototype.readFloatLE=function(r,i){return r=r>>>0,i||J(r,4,this.length),t.read(this,r,!0,23,4)},c.prototype.readFloatBE=function(r,i){return r=r>>>0,i||J(r,4,this.length),t.read(this,r,!1,23,4)},c.prototype.readDoubleLE=function(r,i){return r=r>>>0,i||J(r,8,this.length),t.read(this,r,!0,52,8)},c.prototype.readDoubleBE=function(r,i){return r=r>>>0,i||J(r,8,this.length),t.read(this,r,!1,52,8)};function te(l,r,i,f,y,b){if(!c.isBuffer(l))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>y||r<b)throw new RangeError('"value" argument is out of bounds');if(i+f>l.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(r,i,f,y){if(r=+r,i=i>>>0,f=f>>>0,!y){const W=Math.pow(2,8*f)-1;te(this,r,i,f,W,0)}let b=1,T=0;for(this[i]=r&255;++T<f&&(b*=256);)this[i+T]=r/b&255;return i+f},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(r,i,f,y){if(r=+r,i=i>>>0,f=f>>>0,!y){const W=Math.pow(2,8*f)-1;te(this,r,i,f,W,0)}let b=f-1,T=1;for(this[i+b]=r&255;--b>=0&&(T*=256);)this[i+b]=r/T&255;return i+f},c.prototype.writeUint8=c.prototype.writeUInt8=function(r,i,f){return r=+r,i=i>>>0,f||te(this,r,i,1,255,0),this[i]=r&255,i+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(r,i,f){return r=+r,i=i>>>0,f||te(this,r,i,2,65535,0),this[i]=r&255,this[i+1]=r>>>8,i+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(r,i,f){return r=+r,i=i>>>0,f||te(this,r,i,2,65535,0),this[i]=r>>>8,this[i+1]=r&255,i+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(r,i,f){return r=+r,i=i>>>0,f||te(this,r,i,4,4294967295,0),this[i+3]=r>>>24,this[i+2]=r>>>16,this[i+1]=r>>>8,this[i]=r&255,i+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(r,i,f){return r=+r,i=i>>>0,f||te(this,r,i,4,4294967295,0),this[i]=r>>>24,this[i+1]=r>>>16,this[i+2]=r>>>8,this[i+3]=r&255,i+4};function fe(l,r,i,f,y){g(r,f,y,l,i,7);let b=Number(r&BigInt(4294967295));l[i++]=b,b=b>>8,l[i++]=b,b=b>>8,l[i++]=b,b=b>>8,l[i++]=b;let T=Number(r>>BigInt(32)&BigInt(4294967295));return l[i++]=T,T=T>>8,l[i++]=T,T=T>>8,l[i++]=T,T=T>>8,l[i++]=T,i}function xe(l,r,i,f,y){g(r,f,y,l,i,7);let b=Number(r&BigInt(4294967295));l[i+7]=b,b=b>>8,l[i+6]=b,b=b>>8,l[i+5]=b,b=b>>8,l[i+4]=b;let T=Number(r>>BigInt(32)&BigInt(4294967295));return l[i+3]=T,T=T>>8,l[i+2]=T,T=T>>8,l[i+1]=T,T=T>>8,l[i]=T,i+8}c.prototype.writeBigUInt64LE=le(function(r,i=0){return fe(this,r,i,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=le(function(r,i=0){return xe(this,r,i,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(r,i,f,y){if(r=+r,i=i>>>0,!y){const Z=Math.pow(2,8*f-1);te(this,r,i,f,Z-1,-Z)}let b=0,T=1,W=0;for(this[i]=r&255;++b<f&&(T*=256);)r<0&&W===0&&this[i+b-1]!==0&&(W=1),this[i+b]=(r/T>>0)-W&255;return i+f},c.prototype.writeIntBE=function(r,i,f,y){if(r=+r,i=i>>>0,!y){const Z=Math.pow(2,8*f-1);te(this,r,i,f,Z-1,-Z)}let b=f-1,T=1,W=0;for(this[i+b]=r&255;--b>=0&&(T*=256);)r<0&&W===0&&this[i+b+1]!==0&&(W=1),this[i+b]=(r/T>>0)-W&255;return i+f},c.prototype.writeInt8=function(r,i,f){return r=+r,i=i>>>0,f||te(this,r,i,1,127,-128),r<0&&(r=255+r+1),this[i]=r&255,i+1},c.prototype.writeInt16LE=function(r,i,f){return r=+r,i=i>>>0,f||te(this,r,i,2,32767,-32768),this[i]=r&255,this[i+1]=r>>>8,i+2},c.prototype.writeInt16BE=function(r,i,f){return r=+r,i=i>>>0,f||te(this,r,i,2,32767,-32768),this[i]=r>>>8,this[i+1]=r&255,i+2},c.prototype.writeInt32LE=function(r,i,f){return r=+r,i=i>>>0,f||te(this,r,i,4,2147483647,-2147483648),this[i]=r&255,this[i+1]=r>>>8,this[i+2]=r>>>16,this[i+3]=r>>>24,i+4},c.prototype.writeInt32BE=function(r,i,f){return r=+r,i=i>>>0,f||te(this,r,i,4,2147483647,-2147483648),r<0&&(r=4294967295+r+1),this[i]=r>>>24,this[i+1]=r>>>16,this[i+2]=r>>>8,this[i+3]=r&255,i+4},c.prototype.writeBigInt64LE=le(function(r,i=0){return fe(this,r,i,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=le(function(r,i=0){return xe(this,r,i,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ne(l,r,i,f,y,b){if(i+f>l.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function C(l,r,i,f,y){return r=+r,i=i>>>0,y||Ne(l,r,i,4),t.write(l,r,i,f,23,4),i+4}c.prototype.writeFloatLE=function(r,i,f){return C(this,r,i,!0,f)},c.prototype.writeFloatBE=function(r,i,f){return C(this,r,i,!1,f)};function E(l,r,i,f,y){return r=+r,i=i>>>0,y||Ne(l,r,i,8),t.write(l,r,i,f,52,8),i+8}c.prototype.writeDoubleLE=function(r,i,f){return E(this,r,i,!0,f)},c.prototype.writeDoubleBE=function(r,i,f){return E(this,r,i,!1,f)},c.prototype.copy=function(r,i,f,y){if(!c.isBuffer(r))throw new TypeError("argument should be a Buffer");if(f||(f=0),!y&&y!==0&&(y=this.length),i>=r.length&&(i=r.length),i||(i=0),y>0&&y<f&&(y=f),y===f||r.length===0||this.length===0)return 0;if(i<0)throw new RangeError("targetStart out of bounds");if(f<0||f>=this.length)throw new RangeError("Index out of range");if(y<0)throw new RangeError("sourceEnd out of bounds");y>this.length&&(y=this.length),r.length-i<y-f&&(y=r.length-i+f);const b=y-f;return this===r&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(i,f,y):Uint8Array.prototype.set.call(r,this.subarray(f,y),i),b},c.prototype.fill=function(r,i,f,y){if(typeof r=="string"){if(typeof i=="string"?(y=i,i=0,f=this.length):typeof f=="string"&&(y=f,f=this.length),y!==void 0&&typeof y!="string")throw new TypeError("encoding must be a string");if(typeof y=="string"&&!c.isEncoding(y))throw new TypeError("Unknown encoding: "+y);if(r.length===1){const T=r.charCodeAt(0);(y==="utf8"&&T<128||y==="latin1")&&(r=T)}}else typeof r=="number"?r=r&255:typeof r=="boolean"&&(r=Number(r));if(i<0||this.length<i||this.length<f)throw new RangeError("Out of range index");if(f<=i)return this;i=i>>>0,f=f===void 0?this.length:f>>>0,r||(r=0);let b;if(typeof r=="number")for(b=i;b<f;++b)this[b]=r;else{const T=c.isBuffer(r)?r:c.from(r,y),W=T.length;if(W===0)throw new TypeError('The value "'+r+'" is invalid for argument "value"');for(b=0;b<f-i;++b)this[b+i]=T[b%W]}return this};const F={};function U(l,r,i){F[l]=class extends i{constructor(){super(),Object.defineProperty(this,"message",{value:r.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${l}]`,this.stack,delete this.name}get code(){return l}set code(y){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:y,writable:!0})}toString(){return`${this.name} [${l}]: ${this.message}`}}}U("ERR_BUFFER_OUT_OF_BOUNDS",function(l){return l?`${l} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),U("ERR_INVALID_ARG_TYPE",function(l,r){return`The "${l}" argument must be of type number. Received type ${typeof r}`},TypeError),U("ERR_OUT_OF_RANGE",function(l,r,i){let f=`The value of "${l}" is out of range.`,y=i;return Number.isInteger(i)&&Math.abs(i)>2**32?y=q(String(i)):typeof i=="bigint"&&(y=String(i),(i>BigInt(2)**BigInt(32)||i<-(BigInt(2)**BigInt(32)))&&(y=q(y)),y+="n"),f+=` It must be ${r}. Received ${y}`,f},RangeError);function q(l){let r="",i=l.length;const f=l[0]==="-"?1:0;for(;i>=f+4;i-=3)r=`_${l.slice(i-3,i)}${r}`;return`${l.slice(0,i)}${r}`}function h(l,r,i){x(r,"offset"),(l[r]===void 0||l[r+i]===void 0)&&D(r,l.length-(i+1))}function g(l,r,i,f,y,b){if(l>i||l<r){const T=typeof r=="bigint"?"n":"";let W;throw b>3?r===0||r===BigInt(0)?W=`>= 0${T} and < 2${T} ** ${(b+1)*8}${T}`:W=`>= -(2${T} ** ${(b+1)*8-1}${T}) and < 2 ** ${(b+1)*8-1}${T}`:W=`>= ${r}${T} and <= ${i}${T}`,new F.ERR_OUT_OF_RANGE("value",W,l)}h(f,y,b)}function x(l,r){if(typeof l!="number")throw new F.ERR_INVALID_ARG_TYPE(r,"number",l)}function D(l,r,i){throw Math.floor(l)!==l?(x(l,i),new F.ERR_OUT_OF_RANGE(i||"offset","an integer",l)):r<0?new F.ERR_BUFFER_OUT_OF_BOUNDS:new F.ERR_OUT_OF_RANGE(i||"offset",`>= ${i?1:0} and <= ${r}`,l)}const V=/[^+/0-9A-Za-z-_]/g;function H(l){if(l=l.split("=")[0],l=l.trim().replace(V,""),l.length<2)return"";for(;l.length%4!==0;)l=l+"=";return l}function G(l,r){r=r||1/0;let i;const f=l.length;let y=null;const b=[];for(let T=0;T<f;++T){if(i=l.charCodeAt(T),i>55295&&i<57344){if(!y){if(i>56319){(r-=3)>-1&&b.push(239,191,189);continue}else if(T+1===f){(r-=3)>-1&&b.push(239,191,189);continue}y=i;continue}if(i<56320){(r-=3)>-1&&b.push(239,191,189),y=i;continue}i=(y-55296<<10|i-56320)+65536}else y&&(r-=3)>-1&&b.push(239,191,189);if(y=null,i<128){if((r-=1)<0)break;b.push(i)}else if(i<2048){if((r-=2)<0)break;b.push(i>>6|192,i&63|128)}else if(i<65536){if((r-=3)<0)break;b.push(i>>12|224,i>>6&63|128,i&63|128)}else if(i<1114112){if((r-=4)<0)break;b.push(i>>18|240,i>>12&63|128,i>>6&63|128,i&63|128)}else throw new Error("Invalid code point")}return b}function _e(l){const r=[];for(let i=0;i<l.length;++i)r.push(l.charCodeAt(i)&255);return r}function Pe(l,r){let i,f,y;const b=[];for(let T=0;T<l.length&&!((r-=2)<0);++T)i=l.charCodeAt(T),f=i>>8,y=i%256,b.push(y),b.push(f);return b}function We(l){return e.toByteArray(H(l))}function Fe(l,r,i,f){let y;for(y=0;y<f&&!(y+i>=r.length||y>=l.length);++y)r[y+i]=l[y];return y}function oe(l,r){return l instanceof r||l!=null&&l.constructor!=null&&l.constructor.name!=null&&l.constructor.name===r.name}function Se(l){return l!==l}const $e=function(){const l="0123456789abcdef",r=new Array(256);for(let i=0;i<16;++i){const f=i*16;for(let y=0;y<16;++y)r[f+y]=l[i]+l[y]}return r}();function le(l){return typeof BigInt>"u"?Re:l}function Re(){throw new Error("BigInt not supported")}})(qe);/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(n,e){var t=qe,o=t.Buffer;function s(u,c){for(var d in u)c[d]=u[d]}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?n.exports=t:(s(t,e),e.Buffer=a);function a(u,c,d){return o(u,c,d)}a.prototype=Object.create(o.prototype),s(o,a),a.from=function(u,c,d){if(typeof u=="number")throw new TypeError("Argument must not be a number");return o(u,c,d)},a.alloc=function(u,c,d){if(typeof u!="number")throw new TypeError("Argument must be a number");var w=o(u);return c!==void 0?typeof d=="string"?w.fill(c,d):w.fill(c):w.fill(0),w},a.allocUnsafe=function(u){if(typeof u!="number")throw new TypeError("Argument must be a number");return o(u)},a.allocUnsafeSlow=function(u){if(typeof u!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(u)}})(Ut,Ut.exports);var Nr=Ut.exports,Et=65536,qn=4294967295;function Hn(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var Wn=Nr.Buffer,tt=ye.crypto||ye.msCrypto;tt&&tt.getRandomValues?kt.exports=$n:kt.exports=Hn;function $n(n,e){if(n>qn)throw new RangeError("requested too many random bytes");var t=Wn.allocUnsafe(n);if(n>0)if(n>Et)for(var o=0;o<n;o+=Et)tt.getRandomValues(t.slice(o,o+Et));else tt.getRandomValues(t);return typeof e=="function"?process.nextTick(function(){e(null,t)}):t}var Yn=kt.exports,jt={exports:{}};const Gn={},zn=Object.freeze(Object.defineProperty({__proto__:null,default:Gn},Symbol.toStringTag,{value:"Module"})),rt=Bn(zn);var Pr=rt.EventEmitter,bt,ir;function Vn(){if(ir)return bt;ir=1;function n(A,I){var N=Object.keys(A);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(A);I&&(p=p.filter(function(S){return Object.getOwnPropertyDescriptor(A,S).enumerable})),N.push.apply(N,p)}return N}function e(A){for(var I=1;I<arguments.length;I++){var N=arguments[I]!=null?arguments[I]:{};I%2?n(Object(N),!0).forEach(function(p){t(A,p,N[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(A,Object.getOwnPropertyDescriptors(N)):n(Object(N)).forEach(function(p){Object.defineProperty(A,p,Object.getOwnPropertyDescriptor(N,p))})}return A}function t(A,I,N){return I=u(I),I in A?Object.defineProperty(A,I,{value:N,enumerable:!0,configurable:!0,writable:!0}):A[I]=N,A}function o(A,I){if(!(A instanceof I))throw new TypeError("Cannot call a class as a function")}function s(A,I){for(var N=0;N<I.length;N++){var p=I[N];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(A,u(p.key),p)}}function a(A,I,N){return I&&s(A.prototype,I),N&&s(A,N),Object.defineProperty(A,"prototype",{writable:!1}),A}function u(A){var I=c(A,"string");return typeof I=="symbol"?I:String(I)}function c(A,I){if(typeof A!="object"||A===null)return A;var N=A[Symbol.toPrimitive];if(N!==void 0){var p=N.call(A,I||"default");if(typeof p!="object")return p;throw new TypeError("@@toPrimitive must return a primitive value.")}return(I==="string"?String:Number)(A)}var d=qe,w=d.Buffer,m=rt,_=m.inspect,B=_&&_.custom||"inspect";function M(A,I,N){w.prototype.copy.call(A,I,N)}return bt=function(){function A(){o(this,A),this.head=null,this.tail=null,this.length=0}return a(A,[{key:"push",value:function(N){var p={data:N,next:null};this.length>0?this.tail.next=p:this.head=p,this.tail=p,++this.length}},{key:"unshift",value:function(N){var p={data:N,next:this.head};this.length===0&&(this.tail=p),this.head=p,++this.length}},{key:"shift",value:function(){if(this.length!==0){var N=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,N}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(N){if(this.length===0)return"";for(var p=this.head,S=""+p.data;p=p.next;)S+=N+p.data;return S}},{key:"concat",value:function(N){if(this.length===0)return w.alloc(0);for(var p=w.allocUnsafe(N>>>0),S=this.head,R=0;S;)M(S.data,p,R),R+=S.data.length,S=S.next;return p}},{key:"consume",value:function(N,p){var S;return N<this.head.data.length?(S=this.head.data.slice(0,N),this.head.data=this.head.data.slice(N)):N===this.head.data.length?S=this.shift():S=p?this._getString(N):this._getBuffer(N),S}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(N){var p=this.head,S=1,R=p.data;for(N-=R.length;p=p.next;){var v=p.data,P=N>v.length?v.length:N;if(P===v.length?R+=v:R+=v.slice(0,N),N-=P,N===0){P===v.length?(++S,p.next?this.head=p.next:this.head=this.tail=null):(this.head=p,p.data=v.slice(P));break}++S}return this.length-=S,R}},{key:"_getBuffer",value:function(N){var p=w.allocUnsafe(N),S=this.head,R=1;for(S.data.copy(p),N-=S.data.length;S=S.next;){var v=S.data,P=N>v.length?v.length:N;if(v.copy(p,p.length-N,0,P),N-=P,N===0){P===v.length?(++R,S.next?this.head=S.next:this.head=this.tail=null):(this.head=S,S.data=v.slice(P));break}++R}return this.length-=R,p}},{key:B,value:function(N,p){return _(this,e(e({},p),{},{depth:0,customInspect:!1}))}}]),A}(),bt}function Kn(n,e){var t=this,o=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return o||s?(e?e(n):n&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(qt,this,n)):process.nextTick(qt,this,n)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(n||null,function(a){!e&&a?t._writableState?t._writableState.errorEmitted?process.nextTick(Qe,t):(t._writableState.errorEmitted=!0,process.nextTick(or,t,a)):process.nextTick(or,t,a):e?(process.nextTick(Qe,t),e(a)):process.nextTick(Qe,t)}),this)}function or(n,e){qt(n,e),Qe(n)}function Qe(n){n._writableState&&!n._writableState.emitClose||n._readableState&&!n._readableState.emitClose||n.emit("close")}function Xn(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function qt(n,e){n.emit("error",e)}function Jn(n,e){var t=n._readableState,o=n._writableState;t&&t.autoDestroy||o&&o.autoDestroy?n.destroy(e):n.emit("error",e)}var Fr={destroy:Kn,undestroy:Xn,errorOrDestroy:Jn},Be={};function Zn(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}var Lr={};function ue(n,e,t){t||(t=Error);function o(a,u,c){return typeof e=="string"?e:e(a,u,c)}var s=function(a){Zn(u,a);function u(c,d,w){return a.call(this,o(c,d,w))||this}return u}(t);s.prototype.name=t.name,s.prototype.code=n,Lr[n]=s}function sr(n,e){if(Array.isArray(n)){var t=n.length;return n=n.map(function(o){return String(o)}),t>2?"one of ".concat(e," ").concat(n.slice(0,t-1).join(", "),", or ")+n[t-1]:t===2?"one of ".concat(e," ").concat(n[0]," or ").concat(n[1]):"of ".concat(e," ").concat(n[0])}else return"of ".concat(e," ").concat(String(n))}function Qn(n,e,t){return n.substr(!t||t<0?0:+t,e.length)===e}function ei(n,e,t){return(t===void 0||t>n.length)&&(t=n.length),n.substring(t-e.length,t)===e}function ti(n,e,t){return typeof t!="number"&&(t=0),t+e.length>n.length?!1:n.indexOf(e,t)!==-1}ue("ERR_INVALID_OPT_VALUE",function(n,e){return'The value "'+e+'" is invalid for option "'+n+'"'},TypeError);ue("ERR_INVALID_ARG_TYPE",function(n,e,t){var o;typeof e=="string"&&Qn(e,"not ")?(o="must not be",e=e.replace(/^not /,"")):o="must be";var s;if(ei(n," argument"))s="The ".concat(n," ").concat(o," ").concat(sr(e,"type"));else{var a=ti(n,".")?"property":"argument";s='The "'.concat(n,'" ').concat(a," ").concat(o," ").concat(sr(e,"type"))}return s+=". Received type ".concat(typeof t),s},TypeError);ue("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");ue("ERR_METHOD_NOT_IMPLEMENTED",function(n){return"The "+n+" method is not implemented"});ue("ERR_STREAM_PREMATURE_CLOSE","Premature close");ue("ERR_STREAM_DESTROYED",function(n){return"Cannot call "+n+" after a stream was destroyed"});ue("ERR_MULTIPLE_CALLBACK","Callback called multiple times");ue("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");ue("ERR_STREAM_WRITE_AFTER_END","write after end");ue("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);ue("ERR_UNKNOWN_ENCODING",function(n){return"Unknown encoding: "+n},TypeError);ue("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");Be.codes=Lr;var ri=Be.codes.ERR_INVALID_OPT_VALUE;function ni(n,e,t){return n.highWaterMark!=null?n.highWaterMark:e?n[t]:null}function ii(n,e,t,o){var s=ni(e,o,t);if(s!=null){if(!(isFinite(s)&&Math.floor(s)===s)||s<0){var a=o?t:"highWaterMark";throw new ri(a,s)}return Math.floor(s)}return n.objectMode?16:16*1024}var Dr={getHighWaterMark:ii},Ht={exports:{}};typeof Object.create=="function"?Ht.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Ht.exports=function(e,t){if(t){e.super_=t;var o=function(){};o.prototype=t.prototype,e.prototype=new o,e.prototype.constructor=e}};var Ve=Ht.exports,oi=si;function si(n,e){if(Ct("noDeprecation"))return n;var t=!1;function o(){if(!t){if(Ct("throwDeprecation"))throw new Error(e);Ct("traceDeprecation")?console.trace(e):console.warn(e),t=!0}return n.apply(this,arguments)}return o}function Ct(n){try{if(!ye.localStorage)return!1}catch{return!1}var e=ye.localStorage[n];return e==null?!1:String(e).toLowerCase()==="true"}var St,ar;function Or(){if(ar)return St;ar=1,St=k;function n(C){var E=this;this.next=null,this.entry=null,this.finish=function(){Ne(E,C)}}var e;k.WritableState=L;var t={deprecate:oi},o=Pr,s=qe.Buffer,a=(typeof ye<"u"?ye:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function u(C){return s.from(C)}function c(C){return s.isBuffer(C)||C instanceof a}var d=Fr,w=Dr,m=w.getHighWaterMark,_=Be.codes,B=_.ERR_INVALID_ARG_TYPE,M=_.ERR_METHOD_NOT_IMPLEMENTED,A=_.ERR_MULTIPLE_CALLBACK,I=_.ERR_STREAM_CANNOT_PIPE,N=_.ERR_STREAM_DESTROYED,p=_.ERR_STREAM_NULL_VALUES,S=_.ERR_STREAM_WRITE_AFTER_END,R=_.ERR_UNKNOWN_ENCODING,v=d.errorOrDestroy;Ve(k,o);function P(){}function L(C,E,F){e=e||De(),C=C||{},typeof F!="boolean"&&(F=E instanceof e),this.objectMode=!!C.objectMode,F&&(this.objectMode=this.objectMode||!!C.writableObjectMode),this.highWaterMark=m(this,C,"writableHighWaterMark",F),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var U=C.decodeStrings===!1;this.decodeStrings=!U,this.defaultEncoding=C.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(q){He(E,q)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=C.emitClose!==!1,this.autoDestroy=!!C.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new n(this)}L.prototype.getBuffer=function(){for(var E=this.bufferedRequest,F=[];E;)F.push(E),E=E.next;return F},function(){try{Object.defineProperty(L.prototype,"buffer",{get:t.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var j;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(j=Function.prototype[Symbol.hasInstance],Object.defineProperty(k,Symbol.hasInstance,{value:function(E){return j.call(this,E)?!0:this!==k?!1:E&&E._writableState instanceof L}})):j=function(E){return E instanceof this};function k(C){e=e||De();var E=this instanceof e;if(!E&&!j.call(k,this))return new k(C);this._writableState=new L(C,this,E),this.writable=!0,C&&(typeof C.write=="function"&&(this._write=C.write),typeof C.writev=="function"&&(this._writev=C.writev),typeof C.destroy=="function"&&(this._destroy=C.destroy),typeof C.final=="function"&&(this._final=C.final)),o.call(this)}k.prototype.pipe=function(){v(this,new I)};function O(C,E){var F=new S;v(C,F),process.nextTick(E,F)}function X(C,E,F,U){var q;return F===null?q=new p:typeof F!="string"&&!E.objectMode&&(q=new B("chunk",["string","Buffer"],F)),q?(v(C,q),process.nextTick(U,q),!1):!0}k.prototype.write=function(C,E,F){var U=this._writableState,q=!1,h=!U.objectMode&&c(C);return h&&!s.isBuffer(C)&&(C=u(C)),typeof E=="function"&&(F=E,E=null),h?E="buffer":E||(E=U.defaultEncoding),typeof F!="function"&&(F=P),U.ending?O(this,F):(h||X(this,U,C,F))&&(U.pendingcb++,q=ge(this,U,h,C,E,F)),q},k.prototype.cork=function(){this._writableState.corked++},k.prototype.uncork=function(){var C=this._writableState;C.corked&&(C.corked--,!C.writing&&!C.corked&&!C.bufferProcessing&&C.bufferedRequest&&we(this,C))},k.prototype.setDefaultEncoding=function(E){if(typeof E=="string"&&(E=E.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((E+"").toLowerCase())>-1))throw new R(E);return this._writableState.defaultEncoding=E,this},Object.defineProperty(k.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function ie(C,E,F){return!C.objectMode&&C.decodeStrings!==!1&&typeof E=="string"&&(E=s.from(E,F)),E}Object.defineProperty(k.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function ge(C,E,F,U,q,h){if(!F){var g=ie(E,U,q);U!==g&&(F=!0,q="buffer",U=g)}var x=E.objectMode?1:U.length;E.length+=x;var D=E.length<E.highWaterMark;if(D||(E.needDrain=!0),E.writing||E.corked){var V=E.lastBufferedRequest;E.lastBufferedRequest={chunk:U,encoding:q,isBuf:F,callback:h,next:null},V?V.next=E.lastBufferedRequest:E.bufferedRequest=E.lastBufferedRequest,E.bufferedRequestCount+=1}else re(C,E,!1,x,U,q,h);return D}function re(C,E,F,U,q,h,g){E.writelen=U,E.writecb=g,E.writing=!0,E.sync=!0,E.destroyed?E.onwrite(new N("write")):F?C._writev(q,E.onwrite):C._write(q,h,E.onwrite),E.sync=!1}function Ae(C,E,F,U,q){--E.pendingcb,F?(process.nextTick(q,U),process.nextTick(fe,C,E),C._writableState.errorEmitted=!0,v(C,U)):(q(U),C._writableState.errorEmitted=!0,v(C,U),fe(C,E))}function Ce(C){C.writing=!1,C.writecb=null,C.length-=C.writelen,C.writelen=0}function He(C,E){var F=C._writableState,U=F.sync,q=F.writecb;if(typeof q!="function")throw new A;if(Ce(F),E)Ae(C,F,U,E,q);else{var h=Me(F)||C.destroyed;!h&&!F.corked&&!F.bufferProcessing&&F.bufferedRequest&&we(C,F),U?process.nextTick(pe,C,F,h,q):pe(C,F,h,q)}}function pe(C,E,F,U){F||Ie(C,E),E.pendingcb--,U(),fe(C,E)}function Ie(C,E){E.length===0&&E.needDrain&&(E.needDrain=!1,C.emit("drain"))}function we(C,E){E.bufferProcessing=!0;var F=E.bufferedRequest;if(C._writev&&F&&F.next){var U=E.bufferedRequestCount,q=new Array(U),h=E.corkedRequestsFree;h.entry=F;for(var g=0,x=!0;F;)q[g]=F,F.isBuf||(x=!1),F=F.next,g+=1;q.allBuffers=x,re(C,E,!0,E.length,q,"",h.finish),E.pendingcb++,E.lastBufferedRequest=null,h.next?(E.corkedRequestsFree=h.next,h.next=null):E.corkedRequestsFree=new n(E),E.bufferedRequestCount=0}else{for(;F;){var D=F.chunk,V=F.encoding,H=F.callback,G=E.objectMode?1:D.length;if(re(C,E,!1,G,D,V,H),F=F.next,E.bufferedRequestCount--,E.writing)break}F===null&&(E.lastBufferedRequest=null)}E.bufferedRequest=F,E.bufferProcessing=!1}k.prototype._write=function(C,E,F){F(new M("_write()"))},k.prototype._writev=null,k.prototype.end=function(C,E,F){var U=this._writableState;return typeof C=="function"?(F=C,C=null,E=null):typeof E=="function"&&(F=E,E=null),C!=null&&this.write(C,E),U.corked&&(U.corked=1,this.uncork()),U.ending||xe(this,U,F),this},Object.defineProperty(k.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function Me(C){return C.ending&&C.length===0&&C.bufferedRequest===null&&!C.finished&&!C.writing}function J(C,E){C._final(function(F){E.pendingcb--,F&&v(C,F),E.prefinished=!0,C.emit("prefinish"),fe(C,E)})}function te(C,E){!E.prefinished&&!E.finalCalled&&(typeof C._final=="function"&&!E.destroyed?(E.pendingcb++,E.finalCalled=!0,process.nextTick(J,C,E)):(E.prefinished=!0,C.emit("prefinish")))}function fe(C,E){var F=Me(E);if(F&&(te(C,E),E.pendingcb===0&&(E.finished=!0,C.emit("finish"),E.autoDestroy))){var U=C._readableState;(!U||U.autoDestroy&&U.endEmitted)&&C.destroy()}return F}function xe(C,E,F){E.ending=!0,fe(C,E),F&&(E.finished?process.nextTick(F):C.once("finish",F)),E.ended=!0,C.writable=!1}function Ne(C,E,F){var U=C.entry;for(C.entry=null;U;){var q=U.callback;E.pendingcb--,q(F),U=U.next}E.corkedRequestsFree.next=C}return Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(E){this._writableState&&(this._writableState.destroyed=E)}}),k.prototype.destroy=d.destroy,k.prototype._undestroy=d.undestroy,k.prototype._destroy=function(C,E){E(C)},St}var Rt,lr;function De(){if(lr)return Rt;lr=1;var n=Object.keys||function(w){var m=[];for(var _ in w)m.push(_);return m};Rt=u;var e=Ur(),t=Or();Ve(u,e);for(var o=n(t.prototype),s=0;s<o.length;s++){var a=o[s];u.prototype[a]||(u.prototype[a]=t.prototype[a])}function u(w){if(!(this instanceof u))return new u(w);e.call(this,w),t.call(this,w),this.allowHalfOpen=!0,w&&(w.readable===!1&&(this.readable=!1),w.writable===!1&&(this.writable=!1),w.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",c)))}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function c(){this._writableState.ended||process.nextTick(d,this)}function d(w){w.end()}return Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(m){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=m,this._writableState.destroyed=m)}}),Rt}var vt={},cr;function ur(){if(cr)return vt;cr=1;var n=Nr.Buffer,e=n.isEncoding||function(p){switch(p=""+p,p&&p.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function t(p){if(!p)return"utf8";for(var S;;)switch(p){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return p;default:if(S)return;p=(""+p).toLowerCase(),S=!0}}function o(p){var S=t(p);if(typeof S!="string"&&(n.isEncoding===e||!e(p)))throw new Error("Unknown encoding: "+p);return S||p}vt.StringDecoder=s;function s(p){this.encoding=o(p);var S;switch(this.encoding){case"utf16le":this.text=_,this.end=B,S=4;break;case"utf8":this.fillLast=d,S=4;break;case"base64":this.text=M,this.end=A,S=3;break;default:this.write=I,this.end=N;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(S)}s.prototype.write=function(p){if(p.length===0)return"";var S,R;if(this.lastNeed){if(S=this.fillLast(p),S===void 0)return"";R=this.lastNeed,this.lastNeed=0}else R=0;return R<p.length?S?S+this.text(p,R):this.text(p,R):S||""},s.prototype.end=m,s.prototype.text=w,s.prototype.fillLast=function(p){if(this.lastNeed<=p.length)return p.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);p.copy(this.lastChar,this.lastTotal-this.lastNeed,0,p.length),this.lastNeed-=p.length};function a(p){return p<=127?0:p>>5===6?2:p>>4===14?3:p>>3===30?4:p>>6===2?-1:-2}function u(p,S,R){var v=S.length-1;if(v<R)return 0;var P=a(S[v]);return P>=0?(P>0&&(p.lastNeed=P-1),P):--v<R||P===-2?0:(P=a(S[v]),P>=0?(P>0&&(p.lastNeed=P-2),P):--v<R||P===-2?0:(P=a(S[v]),P>=0?(P>0&&(P===2?P=0:p.lastNeed=P-3),P):0))}function c(p,S,R){if((S[0]&192)!==128)return p.lastNeed=0,"";if(p.lastNeed>1&&S.length>1){if((S[1]&192)!==128)return p.lastNeed=1,"";if(p.lastNeed>2&&S.length>2&&(S[2]&192)!==128)return p.lastNeed=2,""}}function d(p){var S=this.lastTotal-this.lastNeed,R=c(this,p);if(R!==void 0)return R;if(this.lastNeed<=p.length)return p.copy(this.lastChar,S,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);p.copy(this.lastChar,S,0,p.length),this.lastNeed-=p.length}function w(p,S){var R=u(this,p,S);if(!this.lastNeed)return p.toString("utf8",S);this.lastTotal=R;var v=p.length-(R-this.lastNeed);return p.copy(this.lastChar,0,v),p.toString("utf8",S,v)}function m(p){var S=p&&p.length?this.write(p):"";return this.lastNeed?S+"":S}function _(p,S){if((p.length-S)%2===0){var R=p.toString("utf16le",S);if(R){var v=R.charCodeAt(R.length-1);if(v>=55296&&v<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=p[p.length-2],this.lastChar[1]=p[p.length-1],R.slice(0,-1)}return R}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=p[p.length-1],p.toString("utf16le",S,p.length-1)}function B(p){var S=p&&p.length?this.write(p):"";if(this.lastNeed){var R=this.lastTotal-this.lastNeed;return S+this.lastChar.toString("utf16le",0,R)}return S}function M(p,S){var R=(p.length-S)%3;return R===0?p.toString("base64",S):(this.lastNeed=3-R,this.lastTotal=3,R===1?this.lastChar[0]=p[p.length-1]:(this.lastChar[0]=p[p.length-2],this.lastChar[1]=p[p.length-1]),p.toString("base64",S,p.length-R))}function A(p){var S=p&&p.length?this.write(p):"";return this.lastNeed?S+this.lastChar.toString("base64",0,3-this.lastNeed):S}function I(p){return p.toString(this.encoding)}function N(p){return p&&p.length?this.write(p):""}return vt}var fr=Be.codes.ERR_STREAM_PREMATURE_CLOSE;function ai(n){var e=!1;return function(){if(!e){e=!0;for(var t=arguments.length,o=new Array(t),s=0;s<t;s++)o[s]=arguments[s];n.apply(this,o)}}}function li(){}function ci(n){return n.setHeader&&typeof n.abort=="function"}function kr(n,e,t){if(typeof e=="function")return kr(n,null,e);e||(e={}),t=ai(t||li);var o=e.readable||e.readable!==!1&&n.readable,s=e.writable||e.writable!==!1&&n.writable,a=function(){n.writable||c()},u=n._writableState&&n._writableState.finished,c=function(){s=!1,u=!0,o||t.call(n)},d=n._readableState&&n._readableState.endEmitted,w=function(){o=!1,d=!0,s||t.call(n)},m=function(A){t.call(n,A)},_=function(){var A;if(o&&!d)return(!n._readableState||!n._readableState.ended)&&(A=new fr),t.call(n,A);if(s&&!u)return(!n._writableState||!n._writableState.ended)&&(A=new fr),t.call(n,A)},B=function(){n.req.on("finish",c)};return ci(n)?(n.on("complete",c),n.on("abort",_),n.req?B():n.on("request",B)):s&&!n._writableState&&(n.on("end",a),n.on("close",a)),n.on("end",w),n.on("finish",c),e.error!==!1&&n.on("error",m),n.on("close",_),function(){n.removeListener("complete",c),n.removeListener("abort",_),n.removeListener("request",B),n.req&&n.req.removeListener("finish",c),n.removeListener("end",a),n.removeListener("close",a),n.removeListener("finish",c),n.removeListener("end",w),n.removeListener("error",m),n.removeListener("close",_)}}var Xt=kr,Tt,dr;function ui(){if(dr)return Tt;dr=1;var n;function e(R,v,P){return v=t(v),v in R?Object.defineProperty(R,v,{value:P,enumerable:!0,configurable:!0,writable:!0}):R[v]=P,R}function t(R){var v=o(R,"string");return typeof v=="symbol"?v:String(v)}function o(R,v){if(typeof R!="object"||R===null)return R;var P=R[Symbol.toPrimitive];if(P!==void 0){var L=P.call(R,v||"default");if(typeof L!="object")return L;throw new TypeError("@@toPrimitive must return a primitive value.")}return(v==="string"?String:Number)(R)}var s=Xt,a=Symbol("lastResolve"),u=Symbol("lastReject"),c=Symbol("error"),d=Symbol("ended"),w=Symbol("lastPromise"),m=Symbol("handlePromise"),_=Symbol("stream");function B(R,v){return{value:R,done:v}}function M(R){var v=R[a];if(v!==null){var P=R[_].read();P!==null&&(R[w]=null,R[a]=null,R[u]=null,v(B(P,!1)))}}function A(R){process.nextTick(M,R)}function I(R,v){return function(P,L){R.then(function(){if(v[d]){P(B(void 0,!0));return}v[m](P,L)},L)}}var N=Object.getPrototypeOf(function(){}),p=Object.setPrototypeOf((n={get stream(){return this[_]},next:function(){var v=this,P=this[c];if(P!==null)return Promise.reject(P);if(this[d])return Promise.resolve(B(void 0,!0));if(this[_].destroyed)return new Promise(function(O,X){process.nextTick(function(){v[c]?X(v[c]):O(B(void 0,!0))})});var L=this[w],j;if(L)j=new Promise(I(L,this));else{var k=this[_].read();if(k!==null)return Promise.resolve(B(k,!1));j=new Promise(this[m])}return this[w]=j,j}},e(n,Symbol.asyncIterator,function(){return this}),e(n,"return",function(){var v=this;return new Promise(function(P,L){v[_].destroy(null,function(j){if(j){L(j);return}P(B(void 0,!0))})})}),n),N),S=function(v){var P,L=Object.create(p,(P={},e(P,_,{value:v,writable:!0}),e(P,a,{value:null,writable:!0}),e(P,u,{value:null,writable:!0}),e(P,c,{value:null,writable:!0}),e(P,d,{value:v._readableState.endEmitted,writable:!0}),e(P,m,{value:function(k,O){var X=L[_].read();X?(L[w]=null,L[a]=null,L[u]=null,k(B(X,!1))):(L[a]=k,L[u]=O)},writable:!0}),P));return L[w]=null,s(v,function(j){if(j&&j.code!=="ERR_STREAM_PREMATURE_CLOSE"){var k=L[u];k!==null&&(L[w]=null,L[a]=null,L[u]=null,k(j)),L[c]=j;return}var O=L[a];O!==null&&(L[w]=null,L[a]=null,L[u]=null,O(B(void 0,!0))),L[d]=!0}),v.on("readable",A.bind(null,L)),L};return Tt=S,Tt}var Bt,hr;function fi(){return hr||(hr=1,Bt=function(){throw new Error("Readable.from is not available in the browser")}),Bt}var At,gr;function Ur(){if(gr)return At;gr=1,At=O;var n;O.ReadableState=k,rt.EventEmitter;var e=function(g,x){return g.listeners(x).length},t=Pr,o=qe.Buffer,s=(typeof ye<"u"?ye:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function a(h){return o.from(h)}function u(h){return o.isBuffer(h)||h instanceof s}var c=rt,d;c&&c.debuglog?d=c.debuglog("stream"):d=function(){};var w=Vn(),m=Fr,_=Dr,B=_.getHighWaterMark,M=Be.codes,A=M.ERR_INVALID_ARG_TYPE,I=M.ERR_STREAM_PUSH_AFTER_EOF,N=M.ERR_METHOD_NOT_IMPLEMENTED,p=M.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,S,R,v;Ve(O,t);var P=m.errorOrDestroy,L=["error","close","destroy","pause","resume"];function j(h,g,x){if(typeof h.prependListener=="function")return h.prependListener(g,x);!h._events||!h._events[g]?h.on(g,x):Array.isArray(h._events[g])?h._events[g].unshift(x):h._events[g]=[x,h._events[g]]}function k(h,g,x){n=n||De(),h=h||{},typeof x!="boolean"&&(x=g instanceof n),this.objectMode=!!h.objectMode,x&&(this.objectMode=this.objectMode||!!h.readableObjectMode),this.highWaterMark=B(this,h,"readableHighWaterMark",x),this.buffer=new w,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=h.emitClose!==!1,this.autoDestroy=!!h.autoDestroy,this.destroyed=!1,this.defaultEncoding=h.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,h.encoding&&(S||(S=ur().StringDecoder),this.decoder=new S(h.encoding),this.encoding=h.encoding)}function O(h){if(n=n||De(),!(this instanceof O))return new O(h);var g=this instanceof n;this._readableState=new k(h,this,g),this.readable=!0,h&&(typeof h.read=="function"&&(this._read=h.read),typeof h.destroy=="function"&&(this._destroy=h.destroy)),t.call(this)}Object.defineProperty(O.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(g){this._readableState&&(this._readableState.destroyed=g)}}),O.prototype.destroy=m.destroy,O.prototype._undestroy=m.undestroy,O.prototype._destroy=function(h,g){g(h)},O.prototype.push=function(h,g){var x=this._readableState,D;return x.objectMode?D=!0:typeof h=="string"&&(g=g||x.defaultEncoding,g!==x.encoding&&(h=o.from(h,g),g=""),D=!0),X(this,h,g,!1,D)},O.prototype.unshift=function(h){return X(this,h,null,!0,!1)};function X(h,g,x,D,V){d("readableAddChunk",g);var H=h._readableState;if(g===null)H.reading=!1,He(h,H);else{var G;if(V||(G=ge(H,g)),G)P(h,G);else if(H.objectMode||g&&g.length>0)if(typeof g!="string"&&!H.objectMode&&Object.getPrototypeOf(g)!==o.prototype&&(g=a(g)),D)H.endEmitted?P(h,new p):ie(h,H,g,!0);else if(H.ended)P(h,new I);else{if(H.destroyed)return!1;H.reading=!1,H.decoder&&!x?(g=H.decoder.write(g),H.objectMode||g.length!==0?ie(h,H,g,!1):we(h,H)):ie(h,H,g,!1)}else D||(H.reading=!1,we(h,H))}return!H.ended&&(H.length<H.highWaterMark||H.length===0)}function ie(h,g,x,D){g.flowing&&g.length===0&&!g.sync?(g.awaitDrain=0,h.emit("data",x)):(g.length+=g.objectMode?1:x.length,D?g.buffer.unshift(x):g.buffer.push(x),g.needReadable&&pe(h)),we(h,g)}function ge(h,g){var x;return!u(g)&&typeof g!="string"&&g!==void 0&&!h.objectMode&&(x=new A("chunk",["string","Buffer","Uint8Array"],g)),x}O.prototype.isPaused=function(){return this._readableState.flowing===!1},O.prototype.setEncoding=function(h){S||(S=ur().StringDecoder);var g=new S(h);this._readableState.decoder=g,this._readableState.encoding=this._readableState.decoder.encoding;for(var x=this._readableState.buffer.head,D="";x!==null;)D+=g.write(x.data),x=x.next;return this._readableState.buffer.clear(),D!==""&&this._readableState.buffer.push(D),this._readableState.length=D.length,this};var re=1073741824;function Ae(h){return h>=re?h=re:(h--,h|=h>>>1,h|=h>>>2,h|=h>>>4,h|=h>>>8,h|=h>>>16,h++),h}function Ce(h,g){return h<=0||g.length===0&&g.ended?0:g.objectMode?1:h!==h?g.flowing&&g.length?g.buffer.head.data.length:g.length:(h>g.highWaterMark&&(g.highWaterMark=Ae(h)),h<=g.length?h:g.ended?g.length:(g.needReadable=!0,0))}O.prototype.read=function(h){d("read",h),h=parseInt(h,10);var g=this._readableState,x=h;if(h!==0&&(g.emittedReadable=!1),h===0&&g.needReadable&&((g.highWaterMark!==0?g.length>=g.highWaterMark:g.length>0)||g.ended))return d("read: emitReadable",g.length,g.ended),g.length===0&&g.ended?F(this):pe(this),null;if(h=Ce(h,g),h===0&&g.ended)return g.length===0&&F(this),null;var D=g.needReadable;d("need readable",D),(g.length===0||g.length-h<g.highWaterMark)&&(D=!0,d("length less than watermark",D)),g.ended||g.reading?(D=!1,d("reading or ended",D)):D&&(d("do read"),g.reading=!0,g.sync=!0,g.length===0&&(g.needReadable=!0),this._read(g.highWaterMark),g.sync=!1,g.reading||(h=Ce(x,g)));var V;return h>0?V=E(h,g):V=null,V===null?(g.needReadable=g.length<=g.highWaterMark,h=0):(g.length-=h,g.awaitDrain=0),g.length===0&&(g.ended||(g.needReadable=!0),x!==h&&g.ended&&F(this)),V!==null&&this.emit("data",V),V};function He(h,g){if(d("onEofChunk"),!g.ended){if(g.decoder){var x=g.decoder.end();x&&x.length&&(g.buffer.push(x),g.length+=g.objectMode?1:x.length)}g.ended=!0,g.sync?pe(h):(g.needReadable=!1,g.emittedReadable||(g.emittedReadable=!0,Ie(h)))}}function pe(h){var g=h._readableState;d("emitReadable",g.needReadable,g.emittedReadable),g.needReadable=!1,g.emittedReadable||(d("emitReadable",g.flowing),g.emittedReadable=!0,process.nextTick(Ie,h))}function Ie(h){var g=h._readableState;d("emitReadable_",g.destroyed,g.length,g.ended),!g.destroyed&&(g.length||g.ended)&&(h.emit("readable"),g.emittedReadable=!1),g.needReadable=!g.flowing&&!g.ended&&g.length<=g.highWaterMark,C(h)}function we(h,g){g.readingMore||(g.readingMore=!0,process.nextTick(Me,h,g))}function Me(h,g){for(;!g.reading&&!g.ended&&(g.length<g.highWaterMark||g.flowing&&g.length===0);){var x=g.length;if(d("maybeReadMore read 0"),h.read(0),x===g.length)break}g.readingMore=!1}O.prototype._read=function(h){P(this,new N("_read()"))},O.prototype.pipe=function(h,g){var x=this,D=this._readableState;switch(D.pipesCount){case 0:D.pipes=h;break;case 1:D.pipes=[D.pipes,h];break;default:D.pipes.push(h);break}D.pipesCount+=1,d("pipe count=%d opts=%j",D.pipesCount,g);var V=(!g||g.end!==!1)&&h!==process.stdout&&h!==process.stderr,H=V?_e:Re;D.endEmitted?process.nextTick(H):x.once("end",H),h.on("unpipe",G);function G(l,r){d("onunpipe"),l===x&&r&&r.hasUnpiped===!1&&(r.hasUnpiped=!0,Fe())}function _e(){d("onend"),h.end()}var Pe=J(x);h.on("drain",Pe);var We=!1;function Fe(){d("cleanup"),h.removeListener("close",$e),h.removeListener("finish",le),h.removeListener("drain",Pe),h.removeListener("error",Se),h.removeListener("unpipe",G),x.removeListener("end",_e),x.removeListener("end",Re),x.removeListener("data",oe),We=!0,D.awaitDrain&&(!h._writableState||h._writableState.needDrain)&&Pe()}x.on("data",oe);function oe(l){d("ondata");var r=h.write(l);d("dest.write",r),r===!1&&((D.pipesCount===1&&D.pipes===h||D.pipesCount>1&&q(D.pipes,h)!==-1)&&!We&&(d("false write response, pause",D.awaitDrain),D.awaitDrain++),x.pause())}function Se(l){d("onerror",l),Re(),h.removeListener("error",Se),e(h,"error")===0&&P(h,l)}j(h,"error",Se);function $e(){h.removeListener("finish",le),Re()}h.once("close",$e);function le(){d("onfinish"),h.removeListener("close",$e),Re()}h.once("finish",le);function Re(){d("unpipe"),x.unpipe(h)}return h.emit("pipe",x),D.flowing||(d("pipe resume"),x.resume()),h};function J(h){return function(){var x=h._readableState;d("pipeOnDrain",x.awaitDrain),x.awaitDrain&&x.awaitDrain--,x.awaitDrain===0&&e(h,"data")&&(x.flowing=!0,C(h))}}O.prototype.unpipe=function(h){var g=this._readableState,x={hasUnpiped:!1};if(g.pipesCount===0)return this;if(g.pipesCount===1)return h&&h!==g.pipes?this:(h||(h=g.pipes),g.pipes=null,g.pipesCount=0,g.flowing=!1,h&&h.emit("unpipe",this,x),this);if(!h){var D=g.pipes,V=g.pipesCount;g.pipes=null,g.pipesCount=0,g.flowing=!1;for(var H=0;H<V;H++)D[H].emit("unpipe",this,{hasUnpiped:!1});return this}var G=q(g.pipes,h);return G===-1?this:(g.pipes.splice(G,1),g.pipesCount-=1,g.pipesCount===1&&(g.pipes=g.pipes[0]),h.emit("unpipe",this,x),this)},O.prototype.on=function(h,g){var x=t.prototype.on.call(this,h,g),D=this._readableState;return h==="data"?(D.readableListening=this.listenerCount("readable")>0,D.flowing!==!1&&this.resume()):h==="readable"&&!D.endEmitted&&!D.readableListening&&(D.readableListening=D.needReadable=!0,D.flowing=!1,D.emittedReadable=!1,d("on readable",D.length,D.reading),D.length?pe(this):D.reading||process.nextTick(fe,this)),x},O.prototype.addListener=O.prototype.on,O.prototype.removeListener=function(h,g){var x=t.prototype.removeListener.call(this,h,g);return h==="readable"&&process.nextTick(te,this),x},O.prototype.removeAllListeners=function(h){var g=t.prototype.removeAllListeners.apply(this,arguments);return(h==="readable"||h===void 0)&&process.nextTick(te,this),g};function te(h){var g=h._readableState;g.readableListening=h.listenerCount("readable")>0,g.resumeScheduled&&!g.paused?g.flowing=!0:h.listenerCount("data")>0&&h.resume()}function fe(h){d("readable nexttick read 0"),h.read(0)}O.prototype.resume=function(){var h=this._readableState;return h.flowing||(d("resume"),h.flowing=!h.readableListening,xe(this,h)),h.paused=!1,this};function xe(h,g){g.resumeScheduled||(g.resumeScheduled=!0,process.nextTick(Ne,h,g))}function Ne(h,g){d("resume",g.reading),g.reading||h.read(0),g.resumeScheduled=!1,h.emit("resume"),C(h),g.flowing&&!g.reading&&h.read(0)}O.prototype.pause=function(){return d("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(d("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function C(h){var g=h._readableState;for(d("flow",g.flowing);g.flowing&&h.read()!==null;);}O.prototype.wrap=function(h){var g=this,x=this._readableState,D=!1;h.on("end",function(){if(d("wrapped end"),x.decoder&&!x.ended){var G=x.decoder.end();G&&G.length&&g.push(G)}g.push(null)}),h.on("data",function(G){if(d("wrapped data"),x.decoder&&(G=x.decoder.write(G)),!(x.objectMode&&G==null)&&!(!x.objectMode&&(!G||!G.length))){var _e=g.push(G);_e||(D=!0,h.pause())}});for(var V in h)this[V]===void 0&&typeof h[V]=="function"&&(this[V]=function(_e){return function(){return h[_e].apply(h,arguments)}}(V));for(var H=0;H<L.length;H++)h.on(L[H],this.emit.bind(this,L[H]));return this._read=function(G){d("wrapped _read",G),D&&(D=!1,h.resume())},this},typeof Symbol=="function"&&(O.prototype[Symbol.asyncIterator]=function(){return R===void 0&&(R=ui()),R(this)}),Object.defineProperty(O.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(O.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(O.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(g){this._readableState&&(this._readableState.flowing=g)}}),O._fromList=E,Object.defineProperty(O.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function E(h,g){if(g.length===0)return null;var x;return g.objectMode?x=g.buffer.shift():!h||h>=g.length?(g.decoder?x=g.buffer.join(""):g.buffer.length===1?x=g.buffer.first():x=g.buffer.concat(g.length),g.buffer.clear()):x=g.buffer.consume(h,g.decoder),x}function F(h){var g=h._readableState;d("endReadable",g.endEmitted),g.endEmitted||(g.ended=!0,process.nextTick(U,g,h))}function U(h,g){if(d("endReadableNT",h.endEmitted,h.length),!h.endEmitted&&h.length===0&&(h.endEmitted=!0,g.readable=!1,g.emit("end"),h.autoDestroy)){var x=g._writableState;(!x||x.autoDestroy&&x.finished)&&g.destroy()}}typeof Symbol=="function"&&(O.from=function(h,g){return v===void 0&&(v=fi()),v(O,h,g)});function q(h,g){for(var x=0,D=h.length;x<D;x++)if(h[x]===g)return x;return-1}return At}var jr=me,ct=Be.codes,di=ct.ERR_METHOD_NOT_IMPLEMENTED,hi=ct.ERR_MULTIPLE_CALLBACK,gi=ct.ERR_TRANSFORM_ALREADY_TRANSFORMING,pi=ct.ERR_TRANSFORM_WITH_LENGTH_0,ut=De();Ve(me,ut);function yi(n,e){var t=this._transformState;t.transforming=!1;var o=t.writecb;if(o===null)return this.emit("error",new hi);t.writechunk=null,t.writecb=null,e!=null&&this.push(e),o(n);var s=this._readableState;s.reading=!1,(s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}function me(n){if(!(this instanceof me))return new me(n);ut.call(this,n),this._transformState={afterTransform:yi.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,n&&(typeof n.transform=="function"&&(this._transform=n.transform),typeof n.flush=="function"&&(this._flush=n.flush)),this.on("prefinish",mi)}function mi(){var n=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,t){pr(n,e,t)}):pr(this,null,null)}me.prototype.push=function(n,e){return this._transformState.needTransform=!1,ut.prototype.push.call(this,n,e)};me.prototype._transform=function(n,e,t){t(new di("_transform()"))};me.prototype._write=function(n,e,t){var o=this._transformState;if(o.writecb=t,o.writechunk=n,o.writeencoding=e,!o.transforming){var s=this._readableState;(o.needTransform||s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}};me.prototype._read=function(n){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};me.prototype._destroy=function(n,e){ut.prototype._destroy.call(this,n,function(t){e(t)})};function pr(n,e,t){if(e)return n.emit("error",e);if(t!=null&&n.push(t),n._writableState.length)throw new pi;if(n._transformState.transforming)throw new gi;return n.push(null)}var wi=Ge,qr=jr;Ve(Ge,qr);function Ge(n){if(!(this instanceof Ge))return new Ge(n);qr.call(this,n)}Ge.prototype._transform=function(n,e,t){t(null,n)};var It;function _i(n){var e=!1;return function(){e||(e=!0,n.apply(void 0,arguments))}}var Hr=Be.codes,Ei=Hr.ERR_MISSING_ARGS,bi=Hr.ERR_STREAM_DESTROYED;function yr(n){if(n)throw n}function Ci(n){return n.setHeader&&typeof n.abort=="function"}function Si(n,e,t,o){o=_i(o);var s=!1;n.on("close",function(){s=!0}),It===void 0&&(It=Xt),It(n,{readable:e,writable:t},function(u){if(u)return o(u);s=!0,o()});var a=!1;return function(u){if(!s&&!a){if(a=!0,Ci(n))return n.abort();if(typeof n.destroy=="function")return n.destroy();o(u||new bi("pipe"))}}}function mr(n){n()}function Ri(n,e){return n.pipe(e)}function vi(n){return!n.length||typeof n[n.length-1]!="function"?yr:n.pop()}function Ti(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];var o=vi(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new Ei("streams");var s,a=e.map(function(u,c){var d=c<e.length-1,w=c>0;return Si(u,d,w,function(m){s||(s=m),m&&a.forEach(mr),!d&&(a.forEach(mr),o(s))})});return e.reduce(Ri)}var Bi=Ti;(function(n,e){e=n.exports=Ur(),e.Stream=e,e.Readable=e,e.Writable=Or(),e.Duplex=De(),e.Transform=jr,e.PassThrough=wi,e.finished=Xt,e.pipeline=Bi})(jt,jt.exports);var Ai=jt.exports;/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let wr;var Ii=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:ye):n=>(wr||(wr=Promise.resolve())).then(n).catch(e=>setTimeout(()=>{throw e},0));function _r(n,e){for(const t in e)Object.defineProperty(n,t,{value:e[t],enumerable:!0,configurable:!0});return n}function Mi(n,e,t){if(!n||typeof n=="string")throw new TypeError("Please pass an Error to err-code");t||(t={}),typeof e=="object"&&(t=e,e=""),e&&(t.code=e);try{return _r(n,t)}catch{t.message=n.message,t.stack=n.stack;const s=function(){};return s.prototype=Object.create(Object.getPrototypeOf(n)),_r(new s,t)}}var xi=Mi;/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */const Ni=xn("simple-peer"),Wr=Nn,Er=Yn,Pi=Ai,Mt=Ii,$=xi,{Buffer:Fi}=qe,xt=64*1024,Li=5*1e3,Di=5*1e3;function br(n){return n.replace(/a=ice-options:trickle\s\n/g,"")}function Oi(n){console.warn(n)}class Te extends Pi.Duplex{constructor(e){if(e=Object.assign({allowHalfOpen:!1},e),super(e),this._id=Er(4).toString("hex").slice(0,7),this._debug("new peer %o",e),this.channelName=e.initiator?e.channelName||Er(20).toString("hex"):null,this.initiator=e.initiator||!1,this.channelConfig=e.channelConfig||Te.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},Te.config,e.config),this.offerOptions=e.offerOptions||{},this.answerOptions=e.answerOptions||{},this.sdpTransform=e.sdpTransform||(t=>t),this.streams=e.streams||(e.stream?[e.stream]:[]),this.trickle=e.trickle!==void 0?e.trickle:!0,this.allowHalfTrickle=e.allowHalfTrickle!==void 0?e.allowHalfTrickle:!1,this.iceCompleteTimeout=e.iceCompleteTimeout||Li,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=e.wrtc&&typeof e.wrtc=="object"?e.wrtc:Wr(),!this._wrtc)throw $(typeof window>"u"?new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"):new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(t){this.destroy($(t,"ERR_PC_CONSTRUCTOR"));return}this._isReactNativeWebrtc=typeof this._pc._peerConnectionId=="number",this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=t=>{this._onIceCandidate(t)},typeof this._pc.peerIdentity=="object"&&this._pc.peerIdentity.catch(t=>{this.destroy($(t,"ERR_PC_PEER_IDENTITY"))}),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=t=>{this._setupData(t)},this.streams&&this.streams.forEach(t=>{this.addStream(t)}),this._pc.ontrack=t=>{this._onTrack(t)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&this._channel.readyState==="open"}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(e){if(!this.destroying){if(this.destroyed)throw $(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if(typeof e=="string")try{e=JSON.parse(e)}catch{e={}}this._debug("signal()"),e.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),e.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(e.transceiverRequest.kind,e.transceiverRequest.init)),e.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(e.candidate):this._pendingCandidates.push(e.candidate)),e.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(e)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(t=>{this._addIceCandidate(t)}),this._pendingCandidates=[],this._pc.remoteDescription.type==="offer"&&this._createAnswer())}).catch(t=>{this.destroy($(t,"ERR_SET_REMOTE_DESCRIPTION"))}),!e.sdp&&!e.candidate&&!e.renegotiate&&!e.transceiverRequest&&this.destroy($(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(e){const t=new this._wrtc.RTCIceCandidate(e);this._pc.addIceCandidate(t).catch(o=>{!t.address||t.address.endsWith(".local")?Oi("Ignoring unsupported ICE candidate."):this.destroy($(o,"ERR_ADD_ICE_CANDIDATE"))})}send(e){if(!this.destroying){if(this.destroyed)throw $(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(e)}}addTransceiver(e,t){if(!this.destroying){if(this.destroyed)throw $(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(e,t),this._needsNegotiation()}catch(o){this.destroy($(o,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:e,init:t}})}}addStream(e){if(!this.destroying){if(this.destroyed)throw $(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),e.getTracks().forEach(t=>{this.addTrack(t,e)})}}addTrack(e,t){if(this.destroying)return;if(this.destroyed)throw $(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");const o=this._senderMap.get(e)||new Map;let s=o.get(t);if(!s)s=this._pc.addTrack(e,t),o.set(t,s),this._senderMap.set(e,o),this._needsNegotiation();else throw s.removed?$(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):$(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED")}replaceTrack(e,t,o){if(this.destroying)return;if(this.destroyed)throw $(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");const s=this._senderMap.get(e),a=s?s.get(o):null;if(!a)throw $(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");t&&this._senderMap.set(t,s),a.replaceTrack!=null?a.replaceTrack(t):this.destroy($(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK"))}removeTrack(e,t){if(this.destroying)return;if(this.destroyed)throw $(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");const o=this._senderMap.get(e),s=o?o.get(t):null;if(!s)throw $(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{s.removed=!0,this._pc.removeTrack(s)}catch(a){a.name==="NS_ERROR_UNEXPECTED"?this._sendersAwaitingStable.push(s):this.destroy($(a,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(e){if(!this.destroying){if(this.destroyed)throw $(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),e.getTracks().forEach(t=>{this.removeTrack(t,e)})}}_needsNegotiation(){this._debug("_needsNegotiation"),!this._batchedNegotiation&&(this._batchedNegotiation=!0,Mt(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1}))}negotiate(){if(!this.destroying){if(this.destroyed)throw $(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(e){this._destroy(e,()=>{})}_destroy(e,t){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",e&&(e.message||e)),Mt(()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",e&&(e.message||e)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch{}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch{}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,e&&this.emit("error",e),this.emit("close"),t()}))}_setupData(e){if(!e.channel)return this.destroy($(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=e.channel,this._channel.binaryType="arraybuffer",typeof this._channel.bufferedAmountLowThreshold=="number"&&(this._channel.bufferedAmountLowThreshold=xt),this.channelName=this._channel.label,this._channel.onmessage=o=>{this._onChannelMessage(o)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=o=>{const s=o.error instanceof Error?o.error:new Error(`Datachannel error: ${o.message} ${o.filename}:${o.lineno}:${o.colno}`);this.destroy($(s,"ERR_DATA_CHANNEL"))};let t=!1;this._closingInterval=setInterval(()=>{this._channel&&this._channel.readyState==="closing"?(t&&this._onChannelClose(),t=!0):t=!1},Di)}_read(){}_write(e,t,o){if(this.destroyed)return o($(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(e)}catch(s){return this.destroy($(s,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>xt?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=o):o(null)}else this._debug("write before connect"),this._chunk=e,this._cb=o}_onFinish(){if(this.destroyed)return;const e=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?e():this.once("connect",e)}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(e=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(e.sdp=br(e.sdp)),e.sdp=this.sdpTransform(e.sdp);const t=()=>{if(this.destroyed)return;const a=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:a.type,sdp:a.sdp})},o=()=>{this._debug("createOffer success"),!this.destroyed&&(this.trickle||this._iceComplete?t():this.once("_iceComplete",t))},s=a=>{this.destroy($(a,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(e).then(o).catch(s)}).catch(e=>{this.destroy($(e,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(e=>{!e.mid&&e.sender.track&&!e.requested&&(e.requested=!0,this.addTransceiver(e.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(e=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(e.sdp=br(e.sdp)),e.sdp=this.sdpTransform(e.sdp);const t=()=>{if(this.destroyed)return;const a=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:a.type,sdp:a.sdp}),this.initiator||this._requestMissingTransceivers()},o=()=>{this.destroyed||(this.trickle||this._iceComplete?t():this.once("_iceComplete",t))},s=a=>{this.destroy($(a,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(e).then(o).catch(s)}).catch(e=>{this.destroy($(e,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||this._pc.connectionState==="failed"&&this.destroy($(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;const e=this._pc.iceConnectionState,t=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",e,t),this.emit("iceStateChange",e,t),(e==="connected"||e==="completed")&&(this._pcReady=!0,this._maybeReady()),e==="failed"&&this.destroy($(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),e==="closed"&&this.destroy($(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(e){const t=o=>(Object.prototype.toString.call(o.values)==="[object Array]"&&o.values.forEach(s=>{Object.assign(o,s)}),o);this._pc.getStats.length===0||this._isReactNativeWebrtc?this._pc.getStats().then(o=>{const s=[];o.forEach(a=>{s.push(t(a))}),e(null,s)},o=>e(o)):this._pc.getStats.length>0?this._pc.getStats(o=>{if(this.destroyed)return;const s=[];o.result().forEach(a=>{const u={};a.names().forEach(c=>{u[c]=a.stat(c)}),u.id=a.id,u.type=a.type,u.timestamp=a.timestamp,s.push(t(u))}),e(null,s)},o=>e(o)):e(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const e=()=>{this.destroyed||this.getStats((t,o)=>{if(this.destroyed)return;t&&(o=[]);const s={},a={},u={};let c=!1;o.forEach(w=>{(w.type==="remotecandidate"||w.type==="remote-candidate")&&(s[w.id]=w),(w.type==="localcandidate"||w.type==="local-candidate")&&(a[w.id]=w),(w.type==="candidatepair"||w.type==="candidate-pair")&&(u[w.id]=w)});const d=w=>{c=!0;let m=a[w.localCandidateId];m&&(m.ip||m.address)?(this.localAddress=m.ip||m.address,this.localPort=Number(m.port)):m&&m.ipAddress?(this.localAddress=m.ipAddress,this.localPort=Number(m.portNumber)):typeof w.googLocalAddress=="string"&&(m=w.googLocalAddress.split(":"),this.localAddress=m[0],this.localPort=Number(m[1])),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let _=s[w.remoteCandidateId];_&&(_.ip||_.address)?(this.remoteAddress=_.ip||_.address,this.remotePort=Number(_.port)):_&&_.ipAddress?(this.remoteAddress=_.ipAddress,this.remotePort=Number(_.portNumber)):typeof w.googRemoteAddress=="string"&&(_=w.googRemoteAddress.split(":"),this.remoteAddress=_[0],this.remotePort=Number(_[1])),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(o.forEach(w=>{w.type==="transport"&&w.selectedCandidatePairId&&d(u[w.selectedCandidatePairId]),(w.type==="googCandidatePair"&&w.googActiveConnection==="true"||(w.type==="candidatepair"||w.type==="candidate-pair")&&w.selected)&&d(w)}),!c&&(!Object.keys(u).length||Object.keys(a).length)){setTimeout(e,100);return}else this._connecting=!1,this._connected=!0;if(this._chunk){try{this.send(this._chunk)}catch(m){return this.destroy($(m,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');const w=this._cb;this._cb=null,w(null)}typeof this._channel.bufferedAmountLowThreshold!="number"&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")})};e()}_onInterval(){!this._cb||!this._channel||this._channel.bufferedAmount>xt||this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||(this._pc.signalingState==="stable"&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(e=>{this._pc.removeTrack(e),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(e){this.destroyed||(e.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}}):!e.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),e.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(e){if(this.destroyed)return;let t=e.data;t instanceof ArrayBuffer&&(t=Fi.from(t)),this.push(t)}_onChannelBufferedAmountLow(){if(this.destroyed||!this._cb)return;this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);const e=this._cb;this._cb=null,e(null)}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(e){this.destroyed||e.streams.forEach(t=>{this._debug("on track"),this.emit("track",e.track,t),this._remoteTracks.push({track:e.track,stream:t}),!this._remoteStreams.some(o=>o.id===t.id)&&(this._remoteStreams.push(t),Mt(()=>{this._debug("on stream"),this.emit("stream",t)}))})}_debug(){const e=[].slice.call(arguments);e[0]="["+this._id+"] "+e[0],Ni.apply(null,e)}}Te.WEBRTC_SUPPORT=!!Wr();Te.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"};Te.channelConfig={};var ki=Te;const Cr=Tn(ki);var Ke={},Ui=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},$r={},ae={};let Jt;const ji=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];ae.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};ae.getSymbolTotalCodewords=function(e){return ji[e]};ae.getBCHDigit=function(n){let e=0;for(;n!==0;)e++,n>>>=1;return e};ae.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');Jt=e};ae.isKanjiModeEnabled=function(){return typeof Jt<"u"};ae.toSJIS=function(e){return Jt(e)};var ft={};(function(n){n.L={bit:1},n.M={bit:0},n.Q={bit:3},n.H={bit:2};function e(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return n.L;case"m":case"medium":return n.M;case"q":case"quartile":return n.Q;case"h":case"high":return n.H;default:throw new Error("Unknown EC Level: "+t)}}n.isValid=function(o){return o&&typeof o.bit<"u"&&o.bit>=0&&o.bit<4},n.from=function(o,s){if(n.isValid(o))return o;try{return e(o)}catch{return s}}})(ft);function Yr(){this.buffer=[],this.length=0}Yr.prototype={get:function(n){const e=Math.floor(n/8);return(this.buffer[e]>>>7-n%8&1)===1},put:function(n,e){for(let t=0;t<e;t++)this.putBit((n>>>e-t-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(n){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),n&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var qi=Yr;function Xe(n){if(!n||n<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=n,this.data=new Uint8Array(n*n),this.reservedBit=new Uint8Array(n*n)}Xe.prototype.set=function(n,e,t,o){const s=n*this.size+e;this.data[s]=t,o&&(this.reservedBit[s]=!0)};Xe.prototype.get=function(n,e){return this.data[n*this.size+e]};Xe.prototype.xor=function(n,e,t){this.data[n*this.size+e]^=t};Xe.prototype.isReserved=function(n,e){return this.reservedBit[n*this.size+e]};var Hi=Xe,Gr={};(function(n){const e=ae.getSymbolSize;n.getRowColCoords=function(o){if(o===1)return[];const s=Math.floor(o/7)+2,a=e(o),u=a===145?26:Math.ceil((a-13)/(2*s-2))*2,c=[a-7];for(let d=1;d<s-1;d++)c[d]=c[d-1]-u;return c.push(6),c.reverse()},n.getPositions=function(o){const s=[],a=n.getRowColCoords(o),u=a.length;for(let c=0;c<u;c++)for(let d=0;d<u;d++)c===0&&d===0||c===0&&d===u-1||c===u-1&&d===0||s.push([a[c],a[d]]);return s}})(Gr);var zr={};const Wi=ae.getSymbolSize,Sr=7;zr.getPositions=function(e){const t=Wi(e);return[[0,0],[t-Sr,0],[0,t-Sr]]};var Vr={};(function(n){n.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};n.isValid=function(s){return s!=null&&s!==""&&!isNaN(s)&&s>=0&&s<=7},n.from=function(s){return n.isValid(s)?parseInt(s,10):void 0},n.getPenaltyN1=function(s){const a=s.size;let u=0,c=0,d=0,w=null,m=null;for(let _=0;_<a;_++){c=d=0,w=m=null;for(let B=0;B<a;B++){let M=s.get(_,B);M===w?c++:(c>=5&&(u+=e.N1+(c-5)),w=M,c=1),M=s.get(B,_),M===m?d++:(d>=5&&(u+=e.N1+(d-5)),m=M,d=1)}c>=5&&(u+=e.N1+(c-5)),d>=5&&(u+=e.N1+(d-5))}return u},n.getPenaltyN2=function(s){const a=s.size;let u=0;for(let c=0;c<a-1;c++)for(let d=0;d<a-1;d++){const w=s.get(c,d)+s.get(c,d+1)+s.get(c+1,d)+s.get(c+1,d+1);(w===4||w===0)&&u++}return u*e.N2},n.getPenaltyN3=function(s){const a=s.size;let u=0,c=0,d=0;for(let w=0;w<a;w++){c=d=0;for(let m=0;m<a;m++)c=c<<1&2047|s.get(w,m),m>=10&&(c===1488||c===93)&&u++,d=d<<1&2047|s.get(m,w),m>=10&&(d===1488||d===93)&&u++}return u*e.N3},n.getPenaltyN4=function(s){let a=0;const u=s.data.length;for(let d=0;d<u;d++)a+=s.data[d];return Math.abs(Math.ceil(a*100/u/5)-10)*e.N4};function t(o,s,a){switch(o){case n.Patterns.PATTERN000:return(s+a)%2===0;case n.Patterns.PATTERN001:return s%2===0;case n.Patterns.PATTERN010:return a%3===0;case n.Patterns.PATTERN011:return(s+a)%3===0;case n.Patterns.PATTERN100:return(Math.floor(s/2)+Math.floor(a/3))%2===0;case n.Patterns.PATTERN101:return s*a%2+s*a%3===0;case n.Patterns.PATTERN110:return(s*a%2+s*a%3)%2===0;case n.Patterns.PATTERN111:return(s*a%3+(s+a)%2)%2===0;default:throw new Error("bad maskPattern:"+o)}}n.applyMask=function(s,a){const u=a.size;for(let c=0;c<u;c++)for(let d=0;d<u;d++)a.isReserved(d,c)||a.xor(d,c,t(s,d,c))},n.getBestMask=function(s,a){const u=Object.keys(n.Patterns).length;let c=0,d=1/0;for(let w=0;w<u;w++){a(w),n.applyMask(w,s);const m=n.getPenaltyN1(s)+n.getPenaltyN2(s)+n.getPenaltyN3(s)+n.getPenaltyN4(s);n.applyMask(w,s),m<d&&(d=m,c=w)}return c}})(Vr);var dt={};const Ee=ft,Je=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Ze=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];dt.getBlocksCount=function(e,t){switch(t){case Ee.L:return Je[(e-1)*4+0];case Ee.M:return Je[(e-1)*4+1];case Ee.Q:return Je[(e-1)*4+2];case Ee.H:return Je[(e-1)*4+3];default:return}};dt.getTotalCodewordsCount=function(e,t){switch(t){case Ee.L:return Ze[(e-1)*4+0];case Ee.M:return Ze[(e-1)*4+1];case Ee.Q:return Ze[(e-1)*4+2];case Ee.H:return Ze[(e-1)*4+3];default:return}};var Kr={},ht={};const Ye=new Uint8Array(512),nt=new Uint8Array(256);(function(){let e=1;for(let t=0;t<255;t++)Ye[t]=e,nt[e]=t,e<<=1,e&256&&(e^=285);for(let t=255;t<512;t++)Ye[t]=Ye[t-255]})();ht.log=function(e){if(e<1)throw new Error("log("+e+")");return nt[e]};ht.exp=function(e){return Ye[e]};ht.mul=function(e,t){return e===0||t===0?0:Ye[nt[e]+nt[t]]};(function(n){const e=ht;n.mul=function(o,s){const a=new Uint8Array(o.length+s.length-1);for(let u=0;u<o.length;u++)for(let c=0;c<s.length;c++)a[u+c]^=e.mul(o[u],s[c]);return a},n.mod=function(o,s){let a=new Uint8Array(o);for(;a.length-s.length>=0;){const u=a[0];for(let d=0;d<s.length;d++)a[d]^=e.mul(s[d],u);let c=0;for(;c<a.length&&a[c]===0;)c++;a=a.slice(c)}return a},n.generateECPolynomial=function(o){let s=new Uint8Array([1]);for(let a=0;a<o;a++)s=n.mul(s,new Uint8Array([1,e.exp(a)]));return s}})(Kr);const Xr=Kr;function Zt(n){this.genPoly=void 0,this.degree=n,this.degree&&this.initialize(this.degree)}Zt.prototype.initialize=function(e){this.degree=e,this.genPoly=Xr.generateECPolynomial(this.degree)};Zt.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const t=new Uint8Array(e.length+this.degree);t.set(e);const o=Xr.mod(t,this.genPoly),s=this.degree-o.length;if(s>0){const a=new Uint8Array(this.degree);return a.set(o,s),a}return o};var $i=Zt,Jr={},be={},Qt={};Qt.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var he={};const Zr="[0-9]+",Yi="[A-Z $%*+\\-./:]+";let ze="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";ze=ze.replace(/u/g,"\\u");const Gi="(?:(?![A-Z0-9 $%*+\\-./:]|"+ze+`)(?:.|[\r
]))+`;he.KANJI=new RegExp(ze,"g");he.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");he.BYTE=new RegExp(Gi,"g");he.NUMERIC=new RegExp(Zr,"g");he.ALPHANUMERIC=new RegExp(Yi,"g");const zi=new RegExp("^"+ze+"$"),Vi=new RegExp("^"+Zr+"$"),Ki=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");he.testKanji=function(e){return zi.test(e)};he.testNumeric=function(e){return Vi.test(e)};he.testAlphanumeric=function(e){return Ki.test(e)};(function(n){const e=Qt,t=he;n.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},n.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},n.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},n.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},n.MIXED={bit:-1},n.getCharCountIndicator=function(a,u){if(!a.ccBits)throw new Error("Invalid mode: "+a);if(!e.isValid(u))throw new Error("Invalid version: "+u);return u>=1&&u<10?a.ccBits[0]:u<27?a.ccBits[1]:a.ccBits[2]},n.getBestModeForData=function(a){return t.testNumeric(a)?n.NUMERIC:t.testAlphanumeric(a)?n.ALPHANUMERIC:t.testKanji(a)?n.KANJI:n.BYTE},n.toString=function(a){if(a&&a.id)return a.id;throw new Error("Invalid mode")},n.isValid=function(a){return a&&a.bit&&a.ccBits};function o(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"numeric":return n.NUMERIC;case"alphanumeric":return n.ALPHANUMERIC;case"kanji":return n.KANJI;case"byte":return n.BYTE;default:throw new Error("Unknown mode: "+s)}}n.from=function(a,u){if(n.isValid(a))return a;try{return o(a)}catch{return u}}})(be);(function(n){const e=ae,t=dt,o=ft,s=be,a=Qt,u=7973,c=e.getBCHDigit(u);function d(B,M,A){for(let I=1;I<=40;I++)if(M<=n.getCapacity(I,A,B))return I}function w(B,M){return s.getCharCountIndicator(B,M)+4}function m(B,M){let A=0;return B.forEach(function(I){const N=w(I.mode,M);A+=N+I.getBitsLength()}),A}function _(B,M){for(let A=1;A<=40;A++)if(m(B,A)<=n.getCapacity(A,M,s.MIXED))return A}n.from=function(M,A){return a.isValid(M)?parseInt(M,10):A},n.getCapacity=function(M,A,I){if(!a.isValid(M))throw new Error("Invalid QR Code version");typeof I>"u"&&(I=s.BYTE);const N=e.getSymbolTotalCodewords(M),p=t.getTotalCodewordsCount(M,A),S=(N-p)*8;if(I===s.MIXED)return S;const R=S-w(I,M);switch(I){case s.NUMERIC:return Math.floor(R/10*3);case s.ALPHANUMERIC:return Math.floor(R/11*2);case s.KANJI:return Math.floor(R/13);case s.BYTE:default:return Math.floor(R/8)}},n.getBestVersionForData=function(M,A){let I;const N=o.from(A,o.M);if(Array.isArray(M)){if(M.length>1)return _(M,N);if(M.length===0)return 1;I=M[0]}else I=M;return d(I.mode,I.getLength(),N)},n.getEncodedBits=function(M){if(!a.isValid(M)||M<7)throw new Error("Invalid QR Code version");let A=M<<12;for(;e.getBCHDigit(A)-c>=0;)A^=u<<e.getBCHDigit(A)-c;return M<<12|A}})(Jr);var Qr={};const Wt=ae,en=1335,Xi=21522,Rr=Wt.getBCHDigit(en);Qr.getEncodedBits=function(e,t){const o=e.bit<<3|t;let s=o<<10;for(;Wt.getBCHDigit(s)-Rr>=0;)s^=en<<Wt.getBCHDigit(s)-Rr;return(o<<10|s)^Xi};var tn={};const Ji=be;function Oe(n){this.mode=Ji.NUMERIC,this.data=n.toString()}Oe.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};Oe.prototype.getLength=function(){return this.data.length};Oe.prototype.getBitsLength=function(){return Oe.getBitsLength(this.data.length)};Oe.prototype.write=function(e){let t,o,s;for(t=0;t+3<=this.data.length;t+=3)o=this.data.substr(t,3),s=parseInt(o,10),e.put(s,10);const a=this.data.length-t;a>0&&(o=this.data.substr(t),s=parseInt(o,10),e.put(s,a*3+1))};var Zi=Oe;const Qi=be,Nt=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function ke(n){this.mode=Qi.ALPHANUMERIC,this.data=n}ke.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};ke.prototype.getLength=function(){return this.data.length};ke.prototype.getBitsLength=function(){return ke.getBitsLength(this.data.length)};ke.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let o=Nt.indexOf(this.data[t])*45;o+=Nt.indexOf(this.data[t+1]),e.put(o,11)}this.data.length%2&&e.put(Nt.indexOf(this.data[t]),6)};var eo=ke;const to=be;function Ue(n){this.mode=to.BYTE,typeof n=="string"?this.data=new TextEncoder().encode(n):this.data=new Uint8Array(n)}Ue.getBitsLength=function(e){return e*8};Ue.prototype.getLength=function(){return this.data.length};Ue.prototype.getBitsLength=function(){return Ue.getBitsLength(this.data.length)};Ue.prototype.write=function(n){for(let e=0,t=this.data.length;e<t;e++)n.put(this.data[e],8)};var ro=Ue;const no=be,io=ae;function je(n){this.mode=no.KANJI,this.data=n}je.getBitsLength=function(e){return e*13};je.prototype.getLength=function(){return this.data.length};je.prototype.getBitsLength=function(){return je.getBitsLength(this.data.length)};je.prototype.write=function(n){let e;for(e=0;e<this.data.length;e++){let t=io.toSJIS(this.data[e]);if(t>=33088&&t<=40956)t-=33088;else if(t>=57408&&t<=60351)t-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);t=(t>>>8&255)*192+(t&255),n.put(t,13)}};var oo=je,rn={exports:{}};(function(n){var e={single_source_shortest_paths:function(t,o,s){var a={},u={};u[o]=0;var c=e.PriorityQueue.make();c.push(o,0);for(var d,w,m,_,B,M,A,I,N;!c.empty();){d=c.pop(),w=d.value,_=d.cost,B=t[w]||{};for(m in B)B.hasOwnProperty(m)&&(M=B[m],A=_+M,I=u[m],N=typeof u[m]>"u",(N||I>A)&&(u[m]=A,c.push(m,A),a[m]=w))}if(typeof s<"u"&&typeof u[s]>"u"){var p=["Could not find a path from ",o," to ",s,"."].join("");throw new Error(p)}return a},extract_shortest_path_from_predecessor_list:function(t,o){for(var s=[],a=o;a;)s.push(a),t[a],a=t[a];return s.reverse(),s},find_path:function(t,o,s){var a=e.single_source_shortest_paths(t,o,s);return e.extract_shortest_path_from_predecessor_list(a,s)},PriorityQueue:{make:function(t){var o=e.PriorityQueue,s={},a;t=t||{};for(a in o)o.hasOwnProperty(a)&&(s[a]=o[a]);return s.queue=[],s.sorter=t.sorter||o.default_sorter,s},default_sorter:function(t,o){return t.cost-o.cost},push:function(t,o){var s={value:t,cost:o};this.queue.push(s),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};n.exports=e})(rn);var so=rn.exports;(function(n){const e=be,t=Zi,o=eo,s=ro,a=oo,u=he,c=ae,d=so;function w(p){return unescape(encodeURIComponent(p)).length}function m(p,S,R){const v=[];let P;for(;(P=p.exec(R))!==null;)v.push({data:P[0],index:P.index,mode:S,length:P[0].length});return v}function _(p){const S=m(u.NUMERIC,e.NUMERIC,p),R=m(u.ALPHANUMERIC,e.ALPHANUMERIC,p);let v,P;return c.isKanjiModeEnabled()?(v=m(u.BYTE,e.BYTE,p),P=m(u.KANJI,e.KANJI,p)):(v=m(u.BYTE_KANJI,e.BYTE,p),P=[]),S.concat(R,v,P).sort(function(j,k){return j.index-k.index}).map(function(j){return{data:j.data,mode:j.mode,length:j.length}})}function B(p,S){switch(S){case e.NUMERIC:return t.getBitsLength(p);case e.ALPHANUMERIC:return o.getBitsLength(p);case e.KANJI:return a.getBitsLength(p);case e.BYTE:return s.getBitsLength(p)}}function M(p){return p.reduce(function(S,R){const v=S.length-1>=0?S[S.length-1]:null;return v&&v.mode===R.mode?(S[S.length-1].data+=R.data,S):(S.push(R),S)},[])}function A(p){const S=[];for(let R=0;R<p.length;R++){const v=p[R];switch(v.mode){case e.NUMERIC:S.push([v,{data:v.data,mode:e.ALPHANUMERIC,length:v.length},{data:v.data,mode:e.BYTE,length:v.length}]);break;case e.ALPHANUMERIC:S.push([v,{data:v.data,mode:e.BYTE,length:v.length}]);break;case e.KANJI:S.push([v,{data:v.data,mode:e.BYTE,length:w(v.data)}]);break;case e.BYTE:S.push([{data:v.data,mode:e.BYTE,length:w(v.data)}])}}return S}function I(p,S){const R={},v={start:{}};let P=["start"];for(let L=0;L<p.length;L++){const j=p[L],k=[];for(let O=0;O<j.length;O++){const X=j[O],ie=""+L+O;k.push(ie),R[ie]={node:X,lastCount:0},v[ie]={};for(let ge=0;ge<P.length;ge++){const re=P[ge];R[re]&&R[re].node.mode===X.mode?(v[re][ie]=B(R[re].lastCount+X.length,X.mode)-B(R[re].lastCount,X.mode),R[re].lastCount+=X.length):(R[re]&&(R[re].lastCount=X.length),v[re][ie]=B(X.length,X.mode)+4+e.getCharCountIndicator(X.mode,S))}}P=k}for(let L=0;L<P.length;L++)v[P[L]].end=0;return{map:v,table:R}}function N(p,S){let R;const v=e.getBestModeForData(p);if(R=e.from(S,v),R!==e.BYTE&&R.bit<v.bit)throw new Error('"'+p+'" cannot be encoded with mode '+e.toString(R)+`.
 Suggested mode is: `+e.toString(v));switch(R===e.KANJI&&!c.isKanjiModeEnabled()&&(R=e.BYTE),R){case e.NUMERIC:return new t(p);case e.ALPHANUMERIC:return new o(p);case e.KANJI:return new a(p);case e.BYTE:return new s(p)}}n.fromArray=function(S){return S.reduce(function(R,v){return typeof v=="string"?R.push(N(v,null)):v.data&&R.push(N(v.data,v.mode)),R},[])},n.fromString=function(S,R){const v=_(S,c.isKanjiModeEnabled()),P=A(v),L=I(P,R),j=d.find_path(L.map,"start","end"),k=[];for(let O=1;O<j.length-1;O++)k.push(L.table[j[O]].node);return n.fromArray(M(k))},n.rawSplit=function(S){return n.fromArray(_(S,c.isKanjiModeEnabled()))}})(tn);const gt=ae,Pt=ft,ao=qi,lo=Hi,co=Gr,uo=zr,$t=Vr,Yt=dt,fo=$i,it=Jr,ho=Qr,go=be,Ft=tn;function po(n,e){const t=n.size,o=uo.getPositions(e);for(let s=0;s<o.length;s++){const a=o[s][0],u=o[s][1];for(let c=-1;c<=7;c++)if(!(a+c<=-1||t<=a+c))for(let d=-1;d<=7;d++)u+d<=-1||t<=u+d||(c>=0&&c<=6&&(d===0||d===6)||d>=0&&d<=6&&(c===0||c===6)||c>=2&&c<=4&&d>=2&&d<=4?n.set(a+c,u+d,!0,!0):n.set(a+c,u+d,!1,!0))}}function yo(n){const e=n.size;for(let t=8;t<e-8;t++){const o=t%2===0;n.set(t,6,o,!0),n.set(6,t,o,!0)}}function mo(n,e){const t=co.getPositions(e);for(let o=0;o<t.length;o++){const s=t[o][0],a=t[o][1];for(let u=-2;u<=2;u++)for(let c=-2;c<=2;c++)u===-2||u===2||c===-2||c===2||u===0&&c===0?n.set(s+u,a+c,!0,!0):n.set(s+u,a+c,!1,!0)}}function wo(n,e){const t=n.size,o=it.getEncodedBits(e);let s,a,u;for(let c=0;c<18;c++)s=Math.floor(c/3),a=c%3+t-8-3,u=(o>>c&1)===1,n.set(s,a,u,!0),n.set(a,s,u,!0)}function Lt(n,e,t){const o=n.size,s=ho.getEncodedBits(e,t);let a,u;for(a=0;a<15;a++)u=(s>>a&1)===1,a<6?n.set(a,8,u,!0):a<8?n.set(a+1,8,u,!0):n.set(o-15+a,8,u,!0),a<8?n.set(8,o-a-1,u,!0):a<9?n.set(8,15-a-1+1,u,!0):n.set(8,15-a-1,u,!0);n.set(o-8,8,1,!0)}function _o(n,e){const t=n.size;let o=-1,s=t-1,a=7,u=0;for(let c=t-1;c>0;c-=2)for(c===6&&c--;;){for(let d=0;d<2;d++)if(!n.isReserved(s,c-d)){let w=!1;u<e.length&&(w=(e[u]>>>a&1)===1),n.set(s,c-d,w),a--,a===-1&&(u++,a=7)}if(s+=o,s<0||t<=s){s-=o,o=-o;break}}}function Eo(n,e,t){const o=new ao;t.forEach(function(d){o.put(d.mode.bit,4),o.put(d.getLength(),go.getCharCountIndicator(d.mode,n)),d.write(o)});const s=gt.getSymbolTotalCodewords(n),a=Yt.getTotalCodewordsCount(n,e),u=(s-a)*8;for(o.getLengthInBits()+4<=u&&o.put(0,4);o.getLengthInBits()%8!==0;)o.putBit(0);const c=(u-o.getLengthInBits())/8;for(let d=0;d<c;d++)o.put(d%2?17:236,8);return bo(o,n,e)}function bo(n,e,t){const o=gt.getSymbolTotalCodewords(e),s=Yt.getTotalCodewordsCount(e,t),a=o-s,u=Yt.getBlocksCount(e,t),c=o%u,d=u-c,w=Math.floor(o/u),m=Math.floor(a/u),_=m+1,B=w-m,M=new fo(B);let A=0;const I=new Array(u),N=new Array(u);let p=0;const S=new Uint8Array(n.buffer);for(let j=0;j<u;j++){const k=j<d?m:_;I[j]=S.slice(A,A+k),N[j]=M.encode(I[j]),A+=k,p=Math.max(p,k)}const R=new Uint8Array(o);let v=0,P,L;for(P=0;P<p;P++)for(L=0;L<u;L++)P<I[L].length&&(R[v++]=I[L][P]);for(P=0;P<B;P++)for(L=0;L<u;L++)R[v++]=N[L][P];return R}function Co(n,e,t,o){let s;if(Array.isArray(n))s=Ft.fromArray(n);else if(typeof n=="string"){let w=e;if(!w){const m=Ft.rawSplit(n);w=it.getBestVersionForData(m,t)}s=Ft.fromString(n,w||40)}else throw new Error("Invalid data");const a=it.getBestVersionForData(s,t);if(!a)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=a;else if(e<a)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+a+`.
`);const u=Eo(e,t,s),c=gt.getSymbolSize(e),d=new lo(c);return po(d,e),yo(d),mo(d,e),Lt(d,t,0),e>=7&&wo(d,e),_o(d,u),isNaN(o)&&(o=$t.getBestMask(d,Lt.bind(null,d,t))),$t.applyMask(o,d),Lt(d,t,o),{modules:d,version:e,errorCorrectionLevel:t,maskPattern:o,segments:s}}$r.create=function(e,t){if(typeof e>"u"||e==="")throw new Error("No input text");let o=Pt.M,s,a;return typeof t<"u"&&(o=Pt.from(t.errorCorrectionLevel,Pt.M),s=it.from(t.version),a=$t.from(t.maskPattern),t.toSJISFunc&&gt.setToSJISFunction(t.toSJISFunc)),Co(e,s,o,a)};var nn={},er={};(function(n){function e(t){if(typeof t=="number"&&(t=t.toString()),typeof t!="string")throw new Error("Color should be defined as hex string");let o=t.slice().replace("#","").split("");if(o.length<3||o.length===5||o.length>8)throw new Error("Invalid hex color: "+t);(o.length===3||o.length===4)&&(o=Array.prototype.concat.apply([],o.map(function(a){return[a,a]}))),o.length===6&&o.push("F","F");const s=parseInt(o.join(""),16);return{r:s>>24&255,g:s>>16&255,b:s>>8&255,a:s&255,hex:"#"+o.slice(0,6).join("")}}n.getOptions=function(o){o||(o={}),o.color||(o.color={});const s=typeof o.margin>"u"||o.margin===null||o.margin<0?4:o.margin,a=o.width&&o.width>=21?o.width:void 0,u=o.scale||4;return{width:a,scale:a?4:u,margin:s,color:{dark:e(o.color.dark||"#000000ff"),light:e(o.color.light||"#ffffffff")},type:o.type,rendererOpts:o.rendererOpts||{}}},n.getScale=function(o,s){return s.width&&s.width>=o+s.margin*2?s.width/(o+s.margin*2):s.scale},n.getImageWidth=function(o,s){const a=n.getScale(o,s);return Math.floor((o+s.margin*2)*a)},n.qrToImageData=function(o,s,a){const u=s.modules.size,c=s.modules.data,d=n.getScale(u,a),w=Math.floor((u+a.margin*2)*d),m=a.margin*d,_=[a.color.light,a.color.dark];for(let B=0;B<w;B++)for(let M=0;M<w;M++){let A=(B*w+M)*4,I=a.color.light;if(B>=m&&M>=m&&B<w-m&&M<w-m){const N=Math.floor((B-m)/d),p=Math.floor((M-m)/d);I=_[c[N*u+p]?1:0]}o[A++]=I.r,o[A++]=I.g,o[A++]=I.b,o[A]=I.a}}})(er);(function(n){const e=er;function t(s,a,u){s.clearRect(0,0,a.width,a.height),a.style||(a.style={}),a.height=u,a.width=u,a.style.height=u+"px",a.style.width=u+"px"}function o(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}n.render=function(a,u,c){let d=c,w=u;typeof d>"u"&&(!u||!u.getContext)&&(d=u,u=void 0),u||(w=o()),d=e.getOptions(d);const m=e.getImageWidth(a.modules.size,d),_=w.getContext("2d"),B=_.createImageData(m,m);return e.qrToImageData(B.data,a,d),t(_,w,m),_.putImageData(B,0,0),w},n.renderToDataURL=function(a,u,c){let d=c;typeof d>"u"&&(!u||!u.getContext)&&(d=u,u=void 0),d||(d={});const w=n.render(a,u,d),m=d.type||"image/png",_=d.rendererOpts||{};return w.toDataURL(m,_.quality)}})(nn);var on={};const So=er;function vr(n,e){const t=n.a/255,o=e+'="'+n.hex+'"';return t<1?o+" "+e+'-opacity="'+t.toFixed(2).slice(1)+'"':o}function Dt(n,e,t){let o=n+e;return typeof t<"u"&&(o+=" "+t),o}function Ro(n,e,t){let o="",s=0,a=!1,u=0;for(let c=0;c<n.length;c++){const d=Math.floor(c%e),w=Math.floor(c/e);!d&&!a&&(a=!0),n[c]?(u++,c>0&&d>0&&n[c-1]||(o+=a?Dt("M",d+t,.5+w+t):Dt("m",s,0),s=0,a=!1),d+1<e&&n[c+1]||(o+=Dt("h",u),u=0)):s++}return o}on.render=function(e,t,o){const s=So.getOptions(t),a=e.modules.size,u=e.modules.data,c=a+s.margin*2,d=s.color.light.a?"<path "+vr(s.color.light,"fill")+' d="M0 0h'+c+"v"+c+'H0z"/>':"",w="<path "+vr(s.color.dark,"stroke")+' d="'+Ro(u,a,s.margin)+'"/>',m='viewBox="0 0 '+c+" "+c+'"',B='<svg xmlns="http://www.w3.org/2000/svg" '+(s.width?'width="'+s.width+'" height="'+s.width+'" ':"")+m+' shape-rendering="crispEdges">'+d+w+`</svg>
`;return typeof o=="function"&&o(null,B),B};const vo=Ui,Gt=$r,sn=nn,To=on;function tr(n,e,t,o,s){const a=[].slice.call(arguments,1),u=a.length,c=typeof a[u-1]=="function";if(!c&&!vo())throw new Error("Callback required as last argument");if(c){if(u<2)throw new Error("Too few arguments provided");u===2?(s=t,t=e,e=o=void 0):u===3&&(e.getContext&&typeof s>"u"?(s=o,o=void 0):(s=o,o=t,t=e,e=void 0))}else{if(u<1)throw new Error("Too few arguments provided");return u===1?(t=e,e=o=void 0):u===2&&!e.getContext&&(o=t,t=e,e=void 0),new Promise(function(d,w){try{const m=Gt.create(t,o);d(n(m,e,o))}catch(m){w(m)}})}try{const d=Gt.create(t,o);s(null,n(d,e,o))}catch(d){s(d)}}Ke.create=Gt.create;Ke.toCanvas=tr.bind(null,sn.render);Ke.toDataURL=tr.bind(null,sn.renderToDataURL);Ke.toString=tr.bind(null,function(n,e,t){return To.render(n,t)});class ot{constructor({isHost:e,onConnected:t,onMessage:o,onDisconnected:s}){this.peer=null,this.isHost=e,this.onConnected=t,this.onMessage=o,this.onDisconnected=s,this.isConnected=!1}initAsHost(){return new Promise((e,t)=>{try{this.peer=new Cr({initiator:!0}),this.peer.on("signal",o=>{const s=JSON.stringify(o);e(s)}),this.setupPeerEvents()}catch(o){t(o)}})}initAsGuest(e){return new Promise((t,o)=>{try{this.peer=new Cr,this.peer.on("signal",a=>{const u=JSON.stringify(a);t(u)}),this.setupPeerEvents();const s=JSON.parse(e);this.peer.signal(s)}catch(s){o(s)}})}processAnswer(e){try{const t=JSON.parse(e);this.peer.signal(t)}catch(t){console.error("Error processing answer:",t)}}setupPeerEvents(){this.peer.on("connect",()=>{this.isConnected=!0,this.onConnected&&this.onConnected()}),this.peer.on("data",e=>{if(this.onMessage)try{const t=JSON.parse(e);this.onMessage(t)}catch(t){console.error("Error parsing message:",t)}}),this.peer.on("close",()=>{this.isConnected=!1,this.onDisconnected&&this.onDisconnected()}),this.peer.on("error",e=>{console.error("Peer connection error:",e),this.isConnected=!1,this.onDisconnected&&this.onDisconnected()})}sendMessage(e){if(!this.isConnected||!this.peer)return!1;try{const t=JSON.stringify(e);return this.peer.send(t),!0}catch(t){return console.error("Error sending message:",t),!1}}static async generateQRCode(e,t){try{await Ke.toCanvas(t,e,{width:256,margin:1,color:{dark:"#000000",light:"#ffffff"}})}catch(o){console.error("Error generating QR code:",o)}}disconnect(){this.peer&&(this.peer.destroy(),this.peer=null,this.isConnected=!1)}}const Bo=3,Ao=5,Io=.5,Mo=15,xo=100,No=20,Po=10,Fo=800,Lo=600,Do=1e3,Y={winScore:Bo,initialBallSpeed:Ao,ballSpeedIncrement:Io,maxBallSpeed:Mo,paddleWidth:xo,paddleHeight:No,ballRadius:Po,fieldWidth:Fo,fieldHeight:Lo,fieldDepth:Do};class Oo{constructor({isHost:e,onScoreUpdate:t,onBallOut:o,onGameOver:s}){this.isHost=e,this.onScoreUpdate=t,this.onBallOut=o,this.onGameOver=s,this.gameState=this.createInitialGameState(),this.lastUpdateTime=0}createInitialGameState(){return{ball:{x:Y.fieldWidth/2,y:Y.fieldHeight/2,z:Y.fieldDepth/2,radius:Y.ballRadius,velocityX:0,velocityY:0,velocityZ:0,speed:Y.initialBallSpeed},localPlayer:{paddle:{x:Y.fieldWidth/2,y:Y.fieldHeight-50,width:Y.paddleWidth,height:Y.paddleHeight,depth:0},score:0,isHost:this.isHost},remotePlayer:{paddle:{x:Y.fieldWidth/2,y:50,width:Y.paddleWidth,height:Y.paddleHeight,depth:Y.fieldDepth},score:0,isHost:!this.isHost},isPlaying:!1,isPaused:!1,settings:{winScore:Y.winScore,initialBallSpeed:Y.initialBallSpeed,ballSpeedIncrement:Y.ballSpeedIncrement,maxBallSpeed:Y.maxBallSpeed}}}startGame(){this.gameState.isPlaying=!0,this.gameState.isPaused=!1,this.isHost&&this.initBallMovement(),this.lastUpdateTime=performance.now()}initBallMovement(){const e=this.gameState.ball;e.x=Y.fieldWidth/2,e.y=Y.fieldHeight/2,e.z=Y.fieldDepth/2;const t=Math.random()*Math.PI/2-Math.PI/4;e.velocityX=Math.sin(t)*e.speed,e.velocityY=0,e.velocityZ=this.isHost?e.speed:-e.speed}update(e){if(!this.gameState.isPlaying||this.gameState.isPaused)return!1;const t=(e-this.lastUpdateTime)/1e3;return this.lastUpdateTime=e,this.updateBall(t),this.checkCollisions(),!0}updateBall(e){const t=this.gameState.ball;t.x+=t.velocityX*e,t.y+=t.velocityY*e,t.z+=t.velocityZ*e,(t.x-t.radius<0||t.x+t.radius>Y.fieldWidth)&&(t.velocityX=-t.velocityX,t.x-t.radius<0?t.x=t.radius:t.x=Y.fieldWidth-t.radius),(t.y-t.radius<0||t.y+t.radius>Y.fieldHeight)&&(t.velocityY=-t.velocityY,t.y-t.radius<0?t.y=t.radius:t.y=Y.fieldHeight-t.radius),(t.z<0||t.z>Y.fieldDepth)&&this.handleBallOut()}checkCollisions(){const e=this.gameState.ball,t=this.gameState.localPlayer.paddle,o=this.gameState.remotePlayer.paddle;e.z<=t.depth+e.radius&&e.z>=t.depth&&e.velocityZ<0&&e.x>=t.x-t.width/2&&e.x<=t.x+t.width/2&&e.y>=t.y-t.height/2&&e.y<=t.y+t.height/2&&this.handlePaddleCollision(t,!0),e.z>=o.depth-e.radius&&e.z<=o.depth&&e.velocityZ>0&&e.x>=o.x-o.width/2&&e.x<=o.x+o.width/2&&e.y>=o.y-o.height/2&&e.y<=o.y+o.height/2&&this.handlePaddleCollision(o,!1)}handlePaddleCollision(e,t){const o=this.gameState.ball;o.velocityZ=-o.velocityZ;const s=(o.x-e.x)/(e.width/2);o.velocityX=s*o.speed,o.speed=Math.min(o.speed+this.gameState.settings.ballSpeedIncrement,this.gameState.settings.maxBallSpeed);const a=Math.sqrt(o.velocityX*o.velocityX+o.velocityY*o.velocityY+o.velocityZ*o.velocityZ);o.velocityX=o.velocityX/a*o.speed,o.velocityY=o.velocityY/a*o.speed,o.velocityZ=o.velocityZ/a*o.speed,t&&this.onBallOut&&this.onBallOut(o)}handleBallOut(){this.gameState.ball.z<0?this.gameState.remotePlayer.score+=1:this.gameState.localPlayer.score+=1,this.onScoreUpdate&&this.onScoreUpdate(this.gameState.localPlayer.score,this.gameState.remotePlayer.score),this.gameState.localPlayer.score>=this.gameState.settings.winScore||this.gameState.remotePlayer.score>=this.gameState.settings.winScore?(this.gameState.isPlaying=!1,this.onGameOver&&this.onGameOver(this.gameState.localPlayer.score>this.gameState.remotePlayer.score)):this.initBallMovement()}updatePaddlePosition(e,t,o=!0){const s=o?this.gameState.localPlayer.paddle:this.gameState.remotePlayer.paddle;s.x=Math.max(s.width/2,Math.min(Y.fieldWidth-s.width/2,e)),s.y=Math.max(s.height/2,Math.min(Y.fieldHeight-s.height/2,t))}processSwipe(e){const t=this.gameState.ball;if(t.z>Y.fieldDepth/4||t.velocityZ>0)return!1;const o=Math.min(e.speed/10,this.gameState.settings.maxBallSpeed);return t.velocityX=Math.cos(e.angle)*o,t.velocityY=Math.sin(e.angle)*o,t.velocityZ=-t.velocityZ,t.speed=Math.min(t.speed+this.gameState.settings.ballSpeedIncrement,this.gameState.settings.maxBallSpeed),!0}resetGame(){this.gameState=this.createInitialGameState()}pauseGame(){this.gameState.isPaused=!0}resumeGame(){this.gameState.isPaused=!1,this.lastUpdateTime=performance.now()}getGameState(){return this.gameState}updateFromRemote(e){e.ball&&(this.gameState.ball=e.ball),e.remotePaddle&&(this.gameState.remotePlayer.paddle=e.remotePaddle),e.score!==void 0&&(this.gameState.remotePlayer.score=e.score.remote,this.gameState.localPlayer.score=e.score.local,this.onScoreUpdate&&this.onScoreUpdate(this.gameState.localPlayer.score,this.gameState.remotePlayer.score))}}function ko(n){const e=document.createElement("div");e.style.color=n,document.body.appendChild(e);const t=window.getComputedStyle(e).color;document.body.removeChild(e);const o=t.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/);return o?{r:parseInt(o[1],10),g:parseInt(o[2],10),b:parseInt(o[3],10)}:{r:255,g:255,b:255}}function Uo(n){const{x:e,y:t,count:o,color:s,speed:a,lifetime:u,minSize:c=1,maxSize:d=4}=n,w=[],m=ko(s),_=performance.now();for(let B=0;B<o;B++){const M=Math.random()*Math.PI*2,A=.5+Math.random();w.push({x:e,y:t,size:c+Math.random()*(d-c),velocityX:Math.cos(M)*a*A,velocityY:Math.sin(M)*a*A,createdAt:_,lifetime:u*(.8+Math.random()*.4),color:m})}return w}class jo{constructor(e){this.canvas=e,this.ctx=e.getContext("2d"),this.resize(),window.addEventListener("resize",()=>this.resize()),this.particles=[]}resize(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.scaleX=this.canvas.width/Y.fieldWidth,this.scaleY=this.canvas.height/Y.fieldHeight}clear(){this.ctx.fillStyle="#000",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}render(e){this.clear(),this.drawField(),this.drawPaddle(e.localPlayer.paddle,!0),this.drawPaddle(e.remotePlayer.paddle,!1),this.drawBall(e.ball),this.updateAndDrawParticles()}drawField(){const e=this.ctx;e.strokeStyle="rgba(0, 243, 255, 0.3)",e.lineWidth=2,e.setLineDash([15,15]),e.beginPath(),e.moveTo(0,this.canvas.height/2),e.lineTo(this.canvas.width,this.canvas.height/2),e.stroke(),e.setLineDash([]),e.strokeStyle="#00f3ff",e.lineWidth=3,e.shadowColor="#00f3ff",e.shadowBlur=10,e.beginPath(),e.rect(0,0,this.canvas.width,this.canvas.height),e.stroke(),e.shadowBlur=0}drawPaddle(e,t){const o=this.ctx;let s=e.width*this.scaleX,a=e.height*this.scaleY;t||(s*=.5,a*=.5);const u=e.x*this.scaleX-s/2,c=e.y*this.scaleY-a/2;o.fillStyle=t?"#00f3ff":"#ff00e6",o.shadowColor=t?"#00f3ff":"#ff00e6",o.shadowBlur=15,o.fillRect(u,c,s,a),o.strokeStyle="#fff",o.lineWidth=2,o.strokeRect(u,c,s,a),o.shadowBlur=0}drawBall(e){const t=this.ctx,o=1-e.z/Y.fieldDepth,s=e.radius*2*this.scaleX*o,a=e.x*this.scaleX,u=e.y*this.scaleY;t.fillStyle="#fff",t.shadowColor="#00f3ff",t.shadowBlur=15,t.beginPath(),t.arc(a,u,s,0,Math.PI*2),t.fill(),t.shadowBlur=0}createParticleEffect(e,t,o="#00f3ff"){const s=Uo({x:e*this.scaleX,y:t*this.scaleY,count:20,color:o,speed:5,lifetime:1e3});this.particles.push(...s)}updateAndDrawParticles(){const e=this.ctx,t=performance.now();for(let o=this.particles.length-1;o>=0;o--){const s=this.particles[o];s.x+=s.velocityX,s.y+=s.velocityY;const a=t-s.createdAt,u=1-a/s.lifetime;e.fillStyle=`rgba(${s.color.r}, ${s.color.g}, ${s.color.b}, ${u})`,e.beginPath(),e.arc(s.x,s.y,s.size,0,Math.PI*2),e.fill(),a>=s.lifetime&&this.particles.splice(o,1)}}screenShake(e=5,t=300){const o=performance.now(),s=this.canvas.style.transform,a=()=>{const c=(performance.now()-o)/t;if(c<1){const d=e*(1-c),w=(Math.random()*2-1)*d,m=(Math.random()*2-1)*d;this.canvas.style.transform=`translate(${w}px, ${m}px)`,requestAnimationFrame(a)}else this.canvas.style.transform=s};requestAnimationFrame(a)}}const an=document.getElementById("connection-screen"),ln=document.getElementById("game-screen"),pt=document.getElementById("host-btn"),yt=document.getElementById("guest-btn"),cn=document.getElementById("host-screen"),un=document.getElementById("guest-screen"),qo=document.getElementById("qr-host"),Ho=document.getElementById("qr-guest"),fn=document.getElementById("offer-data"),Wo=document.getElementById("offer-input"),$o=document.getElementById("copy-offer-btn"),st=document.getElementById("submit-offer-btn"),dn=document.getElementById("host-answer-input"),hn=document.getElementById("guest-answer-output"),gn=document.getElementById("answer-data"),Yo=document.getElementById("answer-input"),Go=document.getElementById("copy-answer-btn"),at=document.getElementById("submit-answer-btn"),pn=document.getElementById("host-connection-status"),zo=document.getElementById("guest-connection-status"),yn=document.getElementById("connection-success"),Vo=document.getElementById("start-game-btn"),mn=document.getElementById("scan-qr-btn"),Tr=document.getElementById("qr-scanner"),ve=document.getElementById("game-canvas"),Ko=document.getElementById("player-score"),Xo=document.getElementById("opponent-score");let ne=null,ee=null,se=null,mt=!1,et=null,zt=0,Vt=0,wn=0;function Jo(){pt.addEventListener("click",Zo),yt.addEventListener("click",Qo),$o.addEventListener("click",()=>Mr(fn)),st.addEventListener("click",es),Go.addEventListener("click",()=>Mr(gn)),at.addEventListener("click",ts),Vo.addEventListener("click",Cn),mn.addEventListener("click",os),ve.addEventListener("mousedown",Br),ve.addEventListener("mousemove",Ar),ve.addEventListener("mouseup",Ir),ve.addEventListener("touchstart",Br),ve.addEventListener("touchmove",Ar),ve.addEventListener("touchend",Ir),window.addEventListener("resize",vn)}async function Zo(){mt=!0,pt.disabled=!0,yt.disabled=!0,cn.classList.remove("hidden");try{ne=new ot({isHost:!0,onConnected:_n,onMessage:En,onDisconnected:bn});const n=await ne.initAsHost();fn.value=n,await ot.generateQRCode(n,qo),setTimeout(()=>{dn.classList.remove("hidden")},2e3)}catch(n){console.error("Error initializing as host:",n),rr()}}function Qo(){mt=!1,pt.disabled=!0,yt.disabled=!0,un.classList.remove("hidden")}async function es(){const n=Wo.value.trim();if(!n){alert("Please enter a valid offer");return}st.disabled=!0;try{ne=new ot({isHost:!1,onConnected:_n,onMessage:En,onDisconnected:bn});const e=await ne.initAsGuest(n);gn.value=e,await ot.generateQRCode(e,Ho),hn.classList.remove("hidden")}catch(e){console.error("Error processing offer:",e),st.disabled=!1,alert("Error processing offer. Please try again.")}}function ts(){const n=Yo.value.trim();if(!n){alert("Please enter a valid answer");return}at.disabled=!0;try{ne.processAnswer(n),pn.textContent="Processing answer..."}catch(e){console.error("Error processing answer:",e),at.disabled=!1,alert("Error processing answer. Please try again.")}}function _n(){mt?pn.textContent="Connected!":zo.textContent="Connected!",yn.classList.remove("hidden")}function En(n){if(ee)switch(n.type){case"ball":ee.updateFromRemote({ball:n.data});break;case"paddle":ee.updateFromRemote({remotePaddle:n.data});break;case"score":ee.updateFromRemote({score:n.data});break;case"start":Cn();break;case"pause":ee.pauseGame();break;case"resume":ee.resumeGame();break;case"gameOver":Rn(n.data.localWon);break;default:console.warn("Unknown message type:",n.type)}}function bn(){alert("Connection lost. Please refresh and try again."),rr()}function rr(){ne&&(ne.disconnect(),ne=null),pt.disabled=!1,yt.disabled=!1,st.disabled=!1,at.disabled=!1,cn.classList.add("hidden"),un.classList.add("hidden"),dn.classList.add("hidden"),hn.classList.add("hidden"),yn.classList.add("hidden")}function Cn(){an.classList.add("hidden"),ln.classList.remove("hidden"),ee=new Oo({isHost:mt,onScoreUpdate:rs,onBallOut:ns,onGameOver:Rn}),se=new jo(ve),ee.startGame(),ne&&ne.sendMessage({type:"start",data:null}),Sn(performance.now()),vn()}function Sn(n){!ee||!se||(ee.update(n),se.render(ee.getGameState()),is(),et=requestAnimationFrame(Sn))}function rs(n,e){Ko.textContent=n,Xo.textContent=e}function ns(n){ne&&(ne.sendMessage({type:"ball",data:n}),se&&(se.createParticleEffect(n.x,n.y),se.screenShake()))}function is(){if(!ne||!ee)return;const e=ee.getGameState().localPlayer.paddle;ne.sendMessage({type:"paddle",data:e})}function Rn(n){et&&(cancelAnimationFrame(et),et=null),alert(`Game Over! ${n?"You Win!":"You Lose!"}`),ee&&ee.resetGame(),an.classList.remove("hidden"),ln.classList.add("hidden"),rr()}function Br(n){const e=n.touches?n.touches[0]:n;zt=e.clientX,Vt=e.clientY,wn=performance.now()}function Ar(n){if(!ee)return;const e=n.touches?n.touches[0]:n,t=e.clientX,o=e.clientY;ee.getGameState();const s=se.canvas,a=t/s.width*Y.fieldWidth,u=o/s.height*Y.fieldHeight;ee.updatePaddlePosition(a,u)}function Ir(n){if(!ee)return;const e=n.changedTouches?n.changedTouches[0]:n,t=e.clientX,o=e.clientY,s=performance.now(),a=t-zt,u=o-Vt,c=s-wn;if(Math.abs(a)>10||Math.abs(u)>10){const w=Math.sqrt(a*a+u*u)/c*1e3,m=Math.atan2(u,a),_={startX:zt,startY:Vt,endX:t,endY:o,duration:c,speed:w,angle:m};ee.processSwipe(_)&&se&&se.createParticleEffect(t/se.canvas.width*Y.fieldWidth,o/se.canvas.height*Y.fieldHeight,"#ff00e6")}}function vn(){se&&se.resize()}function os(){Tr.classList.toggle("hidden"),mn.textContent=Tr.classList.contains("hidden")?"Scan QR Code":"Hide Scanner"}function Mr(n){n.select(),document.execCommand("copy"),alert("Copied to clipboard!")}document.addEventListener("DOMContentLoaded",Jo);
